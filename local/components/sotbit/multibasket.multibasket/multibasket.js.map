{"version":3,"file":"../multibasket.js","mappings":";;;;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAEMA;AA2CF;AACJ;AACA;;AAKI;AACJ;AACA;;AAGI;AACJ;AACA;;AAEI;AACJ;AACA;AACA;;AAGI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEI,sCAA8B;AAAA;;AAAA,QAAjBC,MAAiB,QAAjBA,MAAiB;AAAA,QAATC,MAAS,QAATA,MAAS;;AAAAC;;AAAAC,+CA5HV,+BA4HU;;AAAAA,wCA3HjB;AACTC,wBAAkB,EAAE,sBADX;AAETC,iBAAW,EAAE,cAFJ;AAGTC,kBAAY,EAAE,eAHL;AAITC,qBAAe,EAAE,kBAJR;AAKTC,kBAAY,EAAE,eALL;AAMTC,iBAAW,EAAE,cANJ;AAOTC,gBAAU,EAAE,aAPH;AAQTC,eAAS,EAAE,YARF;AASTC,gBAAU,EAAE,aATH;AAUTC,iBAAW,EAAE,cAVJ;AAWTC,eAAS,EAAE,YAXF;AAYTC,uBAAiB,EAAE,oBAZV;AAaTC,qBAAe,EAAE,mBAbR;AAcTC,iBAAW,EAAE,cAdJ;AAeTC,gBAAU,EAAE,cAfH;AAgBTC,mBAAa,EAAE,iBAhBN;AAiBTC,sBAAgB,EAAE,oBAjBT;AAkBTC,yBAAmB,EAAE,wBAlBZ;AAmBTC,2BAAqB,EAAE,oBAnBd;AAoBTC,sBAAgB,EAAE,cApBT;AAqBTC,uBAAiB,EAAE,qBArBV;AAsBTC,eAAS,EAAE,YAtBF;AAuBTC,sBAAgB,EAAE,oBAvBT;AAwBTC,oBAAc,EAAE,iBAxBP;AAyBTC,iBAAW,EAAE,cAzBJ;AA0BTC,sBAAgB,EAAE,oBA1BT;AA2BTC,mBAAa,EAAE,gBA3BN;AA4BTC,iBAAW,EAAE,cA5BJ;AA6BTC,kBAAY,EAAE,eA7BL;AA8BTC,uBAAiB,EAAE,qBA9BV;AA+BTC,oBAAc,EAAE,mBA/BP;AAgCTC,sBAAgB,EAAE,oBAhCT;AAiCTC,iBAAW,EAAE,eAjCJ;AAkCTC,6BAAuB,EAAE,2BAlChB;AAmCTC,oCAA8B,EAAE,mCAnCvB;AAoCTC,mBAAa,EAAE,iBApCN;AAqCTC,aAAO,EAAE;AArCA,KA2HiB;;AAAArC,gDAhFT,IAgFS;;AAAAA,0CA9Ef,EA8Ee;;AAAAA,8CAzEX,IAyEW;;AAAAA;;AAAAA;;AAE1B,SAAKF,MAAL,GAAcA,MAAd;AAEA,SAAKwC,YAAL,GAAoB,IAApB;;AAEA,QAAI,KAAKC,iBAAL,EAAJ,EAA8B;AAC1B;AACH;;AAED,SAAKC,OAAL,GAAe3C,MAAM,CAAC4C,OAAtB;AACA,SAAKC,aAAL,GAAqB7C,MAAM,CAAC8C,cAA5B;AACA,SAAKC,YAAL,GAAoB/C,MAAM,CAACgD,2BAA3B;AAEA,SAAKC,cAAL;AACA,SAAKC,oBAAL;AAEAC,MAAE,CAACC,cAAHD,CACIE,MADJF,EAEI,gBAFJA,uEAGI;AAAA;AAAA;AAAA;AAAA;AAAAG;AAAA,qBAAkBC,KAAI,CAACC,WAAL,CAAiB,KAAjB,EAAwB,EAAxB,CAAlB;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAHJ;AAMA,SAAKC,uBAAL,GAA+B,IAA/B;AACA,SAAKC,oBAAL,GAA4B,EAA5B;AACH;AAED;AACJ;AACA;;;;;WACI,oCAA2BC,IAA3B,EAAiC;AAC7B,WAAKF,uBAAL,GAA+BE,IAA/B;AACH;AAED;AACJ;AACA;;;;WACI,qCAA4BC,GAA5B,EAAiC;AAC7B,WAAKF,oBAAL,GAA4BE,GAA5B;AACH;AAED;AACJ;AACA;AACA;AACA;;;;WAEI,mBAAUC,MAAV,EAAkBC,MAAlB,EAAqC;AAAA,UAAXC,GAAW,uEAAP,KAAO;;AACjC,UAAI,CAACF,MAAD,IAAW,CAACC,MAAhB,EAAwB;AACpB,eAAO,IAAP;AACH;;AACD,UAAIC,GAAJ,EAAS;AACL,eAAOF,MAAM,CAACG,gBAAPH,CAAwB,mBAAmBC,MAAnB,GAA4B,IAApDD,CAAP;AACH;;AACD,aAAOA,MAAM,CAACI,aAAPJ,CAAqB,mBAAmBC,MAAnB,GAA4B,IAAjDD,CAAP;AACH;;;WAED,0BAAiB;AAAA;;AACb,WAAKF,IAAL,GAAYO,QAAQ,CAACC,cAATD,CAAwB,KAAKE,iBAA7BF,CAAZ;AAEA,WAAKG,OAAL;AACIjE,0BAAkB,EAAG,KAAKkE,SAAL,CAAe,KAAKX,IAApB,EAA0B,KAAKY,UAAL,CAAgBnE,kBAA1C,CADzB;AAEIE,oBAAY,EAAE,KAAKgE,SAAL,CAAe,KAAKX,IAApB,EAA0B,KAAKY,UAAL,CAAgBjE,YAA1C,EAAwD,IAAxD,CAFlB;AAGID,mBAAW,EAAE,KAAKiE,SAAL,CAAe,KAAKX,IAApB,EAA0B,KAAKY,UAAL,CAAgBlE,WAA1C,CAHjB;AAIIG,oBAAY,EAAE,KAAK8D,SAAL,CAAe,KAAKX,IAApB,EAA0B,KAAKY,UAAL,CAAgB/D,YAA1C,CAJlB;AAKIO,yBAAiB,EAAE,KAAKuD,SAAL,CAAe,KAAKX,IAApB,EAA0B,KAAKY,UAAL,CAAgBxD,iBAA1C;AALvB,wDAMkB,KAAKuD,SAAL,CAAe,KAAKX,IAApB,EAA0B,KAAKY,UAAL,CAAgB/D,YAA1C,CANlB,6DAO6B,KAAK8D,SAAL,CAAe,KAAKX,IAApB,EAA0B,KAAKY,UAAL,CAAgBlC,uBAA1C,CAP7B,6CAQa,KAAKiC,SAAL,CAAe,KAAKX,IAApB,EAA0B,KAAKY,UAAL,CAAgB/B,OAA1C,CARb;AAWA,WAAK6B,OAAL,CAAa/B,8BAAb,GAA8C,KAAKgC,SAAL,CAAe,KAAKX,IAApB,EAA0B,KAAKY,UAAL,CAAgBjC,8BAA1C,CAA9C;;AAEA,UAAI,CAAC,KAAK+B,OAAL,CAAa/B,8BAAlB,EAAkD;AAC9C,aAAK+B,OAAL,CAAa/B,8BAAb,GAA8C,KAAK+B,OAAL,CAAahC,uBAA3D;AACH;;AAED,UAAI,KAAKpC,MAAL,CAAYuE,cAAZ,KAA+B,GAA/B,IAAsC,KAAKvE,MAAL,CAAYwE,aAAZ,KAA8B,GAAxE,EAA6E;AACzE,aAAKJ,OAAL,CAAajC,WAAb,GAA2B,KAAKkC,SAAL,CAAe,KAAKX,IAApB,EAA0B,KAAKY,UAAL,CAAgBnC,WAA1C,CAA3B;AACA,aAAKiC,OAAL,CAAajC,WAAb,CAAyBsC,SAAzB,GAAqCvB,EAAE,CAACwB,OAAHxB,CAAWyB,mCAAhD;AACH;;AAED,UAAI,KAAK3E,MAAL,CAAYwE,aAAZ,KAA8B,GAAlC,EAAuC;AACnC,aAAKJ,OAAL,CAAa1C,cAAb,GAA8B,KAAK2C,SAAL,CAAe,KAAKX,IAApB,EAA0B,KAAKY,UAAL,CAAgB5C,cAA1C,CAA9B;AACA,aAAK0C,OAAL,CAAazC,WAAb,GAA2B,KAAK0C,SAAL,CAAe,KAAKX,IAApB,EAA0B,KAAKY,UAAL,CAAgB3C,WAA1C,CAA3B;AACA,aAAKyC,OAAL,CAAaxC,gBAAb,GAAgC,KAAKyC,SAAL,CAAe,KAAKX,IAApB,EAA0B,KAAKY,UAAL,CAAgB1C,gBAA1C,CAAhC;AACA,aAAKwC,OAAL,CAAanC,cAAb,GAA8B,KAAKoC,SAAL,CAAe,KAAKX,IAApB,EAA0B,KAAKY,UAAL,CAAgBrC,cAA1C,CAA9B;AACH;;AAED,UAAI,KAAKjC,MAAL,CAAY4E,iBAAZ,KAAkC,GAAlC,IAAyC,CAAC,KAAKnC,iBAAL,EAA9C,EAAwE;AACpE,aAAK2B,OAAL,CAAa9D,eAAb,GAA+B,KAAK+D,SAAL,CAAe,KAAKX,IAApB,EAA0B,KAAKY,UAAL,CAAgBhE,eAA1C,CAA/B;AACA,aAAK8D,OAAL,CAAa9D,eAAb,CAA6BuE,KAA7B,GAAqC,iBAArC;AACH;;AAED,UAAI,KAAK7E,MAAL,CAAY8E,gBAAZ,KAAiC,GAArC,EAA0C;AACtC,aAAKV,OAAL,CAAa3C,gBAAb,GAAgC,KAAK4C,SAAL,CAAe,KAAKX,IAApB,EAA0B,KAAKY,UAAL,CAAgB7C,gBAA1C,CAAhC;AACH;;AAED,WAAK2C,OAAL,CAAa5D,WAAb,GAA2B,KAAK6D,SAAL,CAAe,KAAKD,OAAL,CAAatD,iBAA5B,EAA+C,KAAKwD,UAAL,CAAgB9D,WAA/D,CAA3B;AACA,WAAK4D,OAAL,CAAa3D,UAAb,GAA0B,KAAK4D,SAAL,CAAe,KAAKD,OAAL,CAAa5D,WAA5B,EAAyC,KAAK8D,UAAL,CAAgB7D,UAAzD,CAA1B;AACA,WAAK2D,OAAL,CAAa1D,SAAb,GAAyB,KAAK2D,SAAL,CAAe,KAAKD,OAAL,CAAatD,iBAA5B,EAA+C,KAAKwD,UAAL,CAAgB5D,SAA/D,CAAzB;AACA,WAAK0D,OAAL,CAAapD,WAAb,GAA2B,KAAKqD,SAAL,CAAe,KAAKX,IAApB,EAA0B,KAAKY,UAAL,CAAgBtD,WAA1C,CAA3B;AACA,WAAKoD,OAAL,CAAaW,SAAb,GAAyB,KAAKV,SAAL,CAAe,KAAKD,OAAL,CAAapD,WAA5B,EAAyC,KAAKsD,UAAL,CAAgBS,SAAzD,CAAzB;AACA,WAAKX,OAAL,CAAalD,aAAb,GAA6B,KAAKmD,SAAL,CAAe,KAAKD,OAAL,CAAapD,WAA5B,EAAyC,KAAKsD,UAAL,CAAgBpD,aAAzD,CAA7B;AACA,WAAKkD,OAAL,CAAajD,gBAAb,GAAgC,KAAKkD,SAAL,CAAe,KAAKD,OAAL,CAAapD,WAA5B,EAAyC,KAAKsD,UAAL,CAAgBnD,gBAAzD,CAAhC;AACA,WAAKiD,OAAL,CAAahD,mBAAb,GAAmC,KAAKiD,SAAL,CAAe,KAAKD,OAAL,CAAapD,WAA5B,EAAyC,KAAKsD,UAAL,CAAgBlD,mBAAzD,CAAnC;AACA,WAAKgD,OAAL,CAAa/C,qBAAb,GAAqC,KAAKgD,SAAL,CAAe,KAAKD,OAAL,CAAapD,WAA5B,EAAyC,KAAKsD,UAAL,CAAgBjD,qBAAzD,CAArC;AACA,WAAK+C,OAAL,CAAa9C,gBAAb,GAAgC,KAAK+C,SAAL,CAAe,KAAKD,OAAL,CAAapD,WAA5B,EAAyC,KAAKsD,UAAL,CAAgBhD,gBAAzD,CAAhC;AACA,WAAK8C,OAAL,CAAa7C,iBAAb,GAAiC,KAAK8C,SAAL,CAAe,KAAKD,OAAL,CAAapD,WAA5B,EAAyC,KAAKsD,UAAL,CAAgB/C,iBAAzD,CAAjC;AACA,WAAK6C,OAAL,CAAa9B,aAAb,GAA6B,KAAK+B,SAAL,CAAe,KAAKD,OAAL,CAAapD,WAA5B,EAAyC,KAAKsD,UAAL,CAAgBhC,aAAzD,CAA7B;AACA,WAAK8B,OAAL,CAAa9B,aAAb,CAA2B0C,YAA3B,CAAwC,WAAxC,EAAqD,EAArD;AAEH;;;WAED,gCAAuB;AAAA;;AACnB,WAAKZ,OAAL,CAAa7D,YAAb,CAA0B0E,gBAA1B,CAA2C,OAA3C,EAAoD,aAAK;AACrDC,SAAC,CAACC,cAAFD;;AACAE,cAAI,CAACC,oBAAL,CAA0BH,CAA1B;AAFJ;AAIA,WAAKd,OAAL,CAAajE,kBAAb,CAAgC8E,gBAAhC,CAAiD,WAAjD,EAA8D,KAAKI,oBAAL,CAA0BC,IAA1B,CAA+B,IAA/B,CAA9D;AACA,WAAKlB,OAAL,CAAajE,kBAAb,CAAgC8E,gBAAhC,CAAiD,UAAjD,EAA6D,KAAKI,oBAAL,CAA0BC,IAA1B,CAA+B,IAA/B,CAA7D;AACA,WAAKlB,OAAL,CAAatD,iBAAb,CAA+BmE,gBAA/B,CAAgD,WAAhD,EAA6D,KAAKI,oBAAL,CAA0BC,IAA1B,CAA+B,IAA/B,CAA7D;AACA,WAAKlB,OAAL,CAAatD,iBAAb,CAA+BmE,gBAA/B,CAAgD,UAAhD,EAA4D,KAAKI,oBAAL,CAA0BC,IAA1B,CAA+B,IAA/B,CAA5D;AACA,WAAKlB,OAAL,CAAa1D,SAAb,CAAuBuE,gBAAvB,CAAwC,OAAxC,EAAiD,KAAKM,oBAAL,CAA0BD,IAA1B,CAA+B,IAA/B,CAAjD;AACA,WAAKlB,OAAL,CAAa1D,SAAb,CAAuBuE,gBAAvB,CAAwC,WAAxC,EAAqD,KAAKO,iBAAL,CAAuBF,IAAvB,CAA4B,IAA5B,CAArD;AACA,WAAKlB,OAAL,CAAajD,gBAAb,CAA8B8D,gBAA9B,CAA+C,OAA/C,EAAwD,KAAKQ,qBAAL,CAA2BH,IAA3B,CAAgC,IAAhC,CAAxD;AACA,WAAKlB,OAAL,CAAahD,mBAAb,CAAiC6D,gBAAjC,CAAkD,OAAlD,EAA2D,KAAKQ,qBAAL,CAA2BH,IAA3B,CAAgC,IAAhC,CAA3D;AACA,WAAKlB,OAAL,CAAapD,WAAb,CAAyBiE,gBAAzB,CAA0C,OAA1C,EAAmD,KAAKS,wBAAL,CAA8BJ,IAA9B,CAAmC,IAAnC,CAAnD;AACA,WAAKlB,OAAL,CAAalD,aAAb,CAA2B+D,gBAA3B,CAA4C,OAA5C,EAAqD,KAAKU,kBAAL,CAAwBL,IAAxB,CAA6B,IAA7B,CAArD;AACA,WAAKlB,OAAL,CAAa/B,8BAAb,CAA4C4C,gBAA5C,CAA6D,OAA7D,EAAsE,KAAKW,kBAAL,CAAwBN,IAAxB,CAA6B,IAA7B,CAAtE;;AAEA,UAAI,KAAKlB,OAAL,CAAajC,WAAb,KAA6B0D,SAAjC,EAA4C;AACxC,aAAKzB,OAAL,CAAajC,WAAb,CAAyB8C,gBAAzB,CAA0C,OAA1C,EAAmD,YAAM;AACrD,cAAMa,UAAU,GAAGV,MAAI,CAAChB,OAAL,CAAaxC,gBAAb,CAA8BiD,KAA9B,CAAoCkB,OAApC,KAAgD,MAAnE;;AACA,cAAID,UAAJ,EAAgB;AACZV,kBAAI,CAAChB,OAAL,CAAajC,WAAb,CAAyBsC,SAAzB,GAAqCvB,EAAE,CAACwB,OAAHxB,CAAWyB,mCAAhD;AACAS,kBAAI,CAAChB,OAAL,CAAaxC,gBAAb,CAA8BiD,KAA9B,GAAsC,iBAAtC;;AACA,gBAAIO,MAAI,CAAChB,OAAL,CAAa1C,cAAb,KAAgCmE,SAAhC,IAA6CT,MAAI,CAACxC,aAAL,CAAmBoD,cAAnB,GAAoC,CAArF,EAAwF;AACpFZ,oBAAI,CAAChB,OAAL,CAAa1C,cAAb,CAA4BmD,KAA5B,GAAoC,iBAApC;AACH;AALL,iBAMO;AACHO,kBAAI,CAAChB,OAAL,CAAajC,WAAb,CAAyBsC,SAAzB,GAAqCvB,EAAE,CAACwB,OAAHxB,CAAW+C,kCAAhD;AACAb,kBAAI,CAAChB,OAAL,CAAaxC,gBAAb,CAA8BiD,KAA9B,GAAsC,gBAAtC;;AACA,gBAAIO,MAAI,CAAChB,OAAL,CAAa1C,cAAb,KAAgCmE,SAApC,EAA+C;AAC3CT,oBAAI,CAAChB,OAAL,CAAa1C,cAAb,CAA4BmD,KAA5B,GAAoC,gBAApC;AACH;AACJ;AAdL;AAgBH;;AAEDqB,WAAK,CAACC,SAAND,CAAgBE,KAAhBF,CAAsBG,IAAtBH,CAA2B,KAAK9B,OAAL,CAAa9C,gBAAb,CAA8BgF,UAAzDJ,EAAqEK,OAArEL,CAA6E,aAAK;AAC9E,YAAIM,CAAC,YAAYC,cAAjB,EAAiC;AAC7BD,WAAC,CAACvB,gBAAFuB,CAAmB,OAAnBA,EAA4BpB,MAAI,CAACsB,iBAAL,CAAuBpB,IAAvB,CAA4BF,MAA5B,CAA5BoB;AACH;AAHL;AAKH;;;WAED,kBAAS;AAEL,UAAI,KAAK/D,iBAAL,EAAJ,EAA8B;AAC1B;AACH;;AAED,WAAKkE,cAAL;AACA,WAAKC,gBAAL;AACA,WAAKC,aAAL;AACA,WAAKC,yBAAL;;AAEA,UAAI,KAAK9G,MAAL,CAAYuE,cAAZ,KAA+B,GAAnC,EAAwC;AACpC,aAAKwC,qBAAL;AACA,aAAKC,oBAAL;AACA,aAAKC,+BAAL;AACH;;AAED,WAAKC,yBAAL;AACH;;;WAED,2BAAkBhC,CAAlB,EAAqB;AAEjB,UAAMiC,eAAe,GAAG,eAAxB;;AAEA,UAAIjC,CAAC,CAACkC,aAAFlC,CAAgBmC,SAAhBnC,CAA0BoC,QAA1BpC,CAAmCiC,eAAnCjC,CAAJ,EAAyD;AAErD,aAAKqC,yBAAL;AACA,YAAMC,SAAS,GAAG,KAAKpD,OAAL,CAAa/C,qBAAb,CAAmCoG,SAAnC,CAA6C,IAA7C,CAAlB;AACAD,iBAAS,CAAC3C,KAAV2C,GAAkB,gBAAlBA;AACAtC,SAAC,CAACkC,aAAFlC,CAAgBwC,WAAhBxC,CAA4BsC,SAA5BtC;AACA,aAAKyC,kBAAL,GAA0BzC,CAAC,CAACkC,aAAFlC,CAAgB0C,YAAhB1C,CAA6B,OAA7BA,EAAsCkB,KAAtClB,CAA4C,CAAC,CAA7CA,EAAgD,CAAC,CAAjDA,CAA1B;AACH;AACJ;;;WAED,qCAA4B;AAAA;;AACxBgB,WAAK,CAACC,SAAND,CAAgBE,KAAhBF,CAAsBG,IAAtBH,CAA2B,KAAK9B,OAAL,CAAa9C,gBAAb,CAA8BgF,UAAzDJ,EAAqEK,OAArEL,CAA6E,aAAK;AAC9E,YAAIM,CAAC,YAAYC,cAAjB,EAAiC;AAC7B,cAAMoB,MAAM,GAAGC,MAAI,CAACzD,SAAL,CAAemC,CAAf,EAAkBsB,MAAI,CAACxD,UAAL,CAAgBjD,qBAAlC,CAAf;;AACA,cAAIwG,MAAM,YAAYpB,cAAtB,EAAsC;AAClCoB,kBAAM,CAACE,MAAPF;AACH;AACJ;AANL;AAQH;AAED;AACJ;AACA;AACA;;;;WACI,wCAA+BG,MAA/B,EAAuCC,KAAvC,EAA8C;AAAA;;AAC1C,UAAMC,YAAY,GAAG,KAAKxF,OAAL,CAAayF,GAAb,CAAiB,aAAC;AAAA,eAAI3B,CAAC,CAAC4B,KAAN;AAAlB,QAArB;AACA,UAAMC,UAAU,GAAG,eAAnB;AACA,UAAMC,gBAAgB,GAAG,KAAKlE,OAAL,CAAa7C,iBAAtC;AACA,WAAKoG,kBAAL,GAA0BM,KAA1B;AACA/B,WAAK,CAACC,SAAND,CAAgBE,KAAhBF,CAAsBG,IAAtBH,CAA2B,KAAK9B,OAAL,CAAa9C,gBAAb,CAA8BgF,UAAzDJ,EAAqEK,OAArEL,CAA6E,aAAK;AAC9E,YAAIM,CAAC,YAAYC,cAAbD,IAA+BwB,MAAM,KAAK,KAA9C,EAAqD;AACjD,cAAIxB,CAAC,CAACoB,YAAFpB,CAAe,OAAfA,EAAwBJ,KAAxBI,CAA8B,CAAC,CAA/BA,EAAkC,CAAC,CAAnCA,MAA0CyB,KAA9C,EAAqD;AACjD,gBAAMT,SAAS,GAAGe,MAAI,CAACnE,OAAL,CAAa/C,qBAAb,CAAmCoG,SAAnC,CAA6C,IAA7C,CAAlB;;AACAD,qBAAS,CAAC3C,KAAV2C,GAAkB,gBAAlBA;AACAhB,aAAC,CAACkB,WAAFlB,CAAcgB,SAAdhB;AACA;AACH;;AACD,cAAI0B,YAAY,CAACM,QAAbN,CAAsB1B,CAAC,CAACoB,YAAFpB,CAAe,OAAfA,EAAwBJ,KAAxBI,CAA8B,CAAC,CAA/BA,EAAkC,CAAC,CAAnCA,CAAtB0B,CAAJ,EAAkE;AAC9D1B,aAAC,CAACa,SAAFb,CAAYuB,MAAZvB,CAAmB6B,UAAnB7B;AACA,gBAAMiC,IAAI,GAAGH,gBAAgB,CAACb,SAAjBa,CAA2B,IAA3BA,CAAb;AACAG,gBAAI,CAAC5D,KAAL4D,GAAa,iBAAbA;AACAjC,aAAC,CAACkC,MAAFlC,CAASiC,IAATjC;AACH;AAZL,eAaO,IAAIA,CAAC,YAAYC,cAAbD,IAA+BwB,MAAM,KAAK,OAA9C,EAAuD;AAC1D,cAAI,CAACxB,CAAC,CAACa,SAAFb,CAAYc,QAAZd,CAAqB6B,UAArB7B,CAAL,EAAuC;AACnCA,aAAC,CAACa,SAAFb,CAAYmC,GAAZnC,CAAgB6B,UAAhB7B;AACAN,iBAAK,CAACC,SAAND,CAAgBE,KAAhBF,CAAsBG,IAAtBH,CAA2BM,CAAC,CAACF,UAA7BJ,EAAyCK,OAAzCL,CAAiD,aAAC;AAAA,qBAAIM,CAAC,CAACuB,MAAFvB,EAAJ;AAAlD;AACH;AACJ;AAnBL;AAqBH;;;WAED,8BAAqBtB,CAArB,EAAwB;AACpB,UAAM0D,gBAAgB,GAAG,kCAAzB;AACA,UAAMC,YAAY,GAAG,2BAArB;;AAEA,UAAI3D,CAAC,CAAC4D,IAAF5D,KAAW,WAAf,EAA4B;AACxB,aAAKd,OAAL,CAAa7D,YAAb,CAA0B8G,SAA1B,CAAoCsB,GAApC,CAAwCC,gBAAxC;AACA,aAAKxE,OAAL,CAAatD,iBAAb,CAA+BuG,SAA/B,CAAyCsB,GAAzC,CAA6CE,YAA7C;AAFJ,aAGO,IAAI3D,CAAC,CAAC4D,IAAF5D,KAAW,UAAf,EAA2B;AAC9B,aAAKd,OAAL,CAAatD,iBAAb,CAA+BuG,SAA/B,CAAyCU,MAAzC,CAAgDc,YAAhD;AACA,aAAKzE,OAAL,CAAa7D,YAAb,CAA0B8G,SAA1B,CAAoCU,MAApC,CAA2Ca,gBAA3C;AACH;AACJ;;;WAED,6BAAoB;AAChB,UAAMG,UAAU,GAAG,KAAKC,cAAL,EAAnB;AACA,UAAMC,YAAY,GAAGF,UAAU,KAAK,KAAK/I,MAAL,CAAYkJ,eAA3BH,IACdA,UAAU,KAAK,KAAK/I,MAAL,CAAYkJ,eAAZ,GAA8B,WADpD;;AAGA,UAAI,KAAKlJ,MAAL,CAAYmJ,4BAAZ,KAA6C,GAAjD,EAAsD;AAClD,YAAI,CAACF,YAAL,EAAmB;AACf;AACH;AACJ;;AAED,UAAI,KAAKjJ,MAAL,CAAYoJ,kBAAZ,KAAmC,OAAvC,EAAgD;AAC5ChG,cAAM,CAACiG,QAAPjG,CAAgBkG,MAAhBlG;AACH;;AAEDF,QAAE,CAACqG,aAAHrG,CAAiBE,MAAjBF,EAAyB,yBAAzBA,EAAoD,KAAKR,OAAzDQ;AACH;;;WAED,0BAAiB;AACb,aAAOE,MAAM,CAACiG,QAAPjG,CAAgBoG,QAAvB;AACH;AAED;AACJ;AACA;AACA;;;;WAEI,8BAAqBC,CAArB,EAAwBxB,KAAxB,EAA+ByB,EAA/B,EAAmCC,IAAnC,EAAyC;AACrC,WAAKC,gBAAL,GAAwBF,EAAxB;AACA,UAAMb,YAAY,GAAG,4BAArB;AACA,WAAKgB,8BAAL,CAAoC,KAApC,EAA2C5B,KAA3C;AAEA,WAAK7D,OAAL,CAAa9B,aAAb,CAA2BwH,KAA3B,GAAmCH,IAAI,GAAGA,IAAH,GAAUzG,EAAE,CAACwB,OAAHxB,CAAW6G,6BAA5D;AAEA,UAAMC,UAAU,GAAG,KAAK3F,SAAL,CAAe,KAAKD,OAAL,CAAapD,WAA5B,EAAyC,KAAKsD,UAAL,CAAgB/C,iBAAzD,EAA4E,IAA5E,EAAkF0I,MAArG;AACA,UAAMC,SAAS,GAAGhE,KAAK,CAACC,SAAND,CAAgBE,KAAhBF,CAAsBG,IAAtBH,CAA2B,KAAK9B,OAAL,CAAa9C,gBAAb,CAA8BgF,UAAzDJ,EACbiE,MADajE,CACN,aAAC;AAAA,eAAIM,CAAC,YAAYC,cAAjB;AADK,SAC4BwD,MAD9C;AAEAG,aAAO,CAACC,GAARD,CAAYJ,UAAZI,EAAwBF,SAAS,GAAG,CAApCE;;AACA,UAAIJ,UAAU,KAAKE,SAAS,GAAG,CAA/B,EAAkC;AAC9B,aAAK9F,OAAL,CAAapD,WAAb,CAAyBgD,aAAzB,CAAuC,eAAvC,EACKS,SADL,GACiBvB,EAAE,CAACwB,OAAHxB,CAAWoH,wCAD5B;AAEA,aAAKlG,OAAL,CAAa9B,aAAb,CAA2B0C,YAA3B,CAAwC,UAAxC,EAAoD,IAApD;AAHJ,aAIO,IAAI0E,EAAJ,EAAQ;AACX,aAAKtF,OAAL,CAAapD,WAAb,CAAyBgD,aAAzB,CAAuC,eAAvC,EACKS,SADL,GACiBvB,EAAE,CAACwB,OAAHxB,CAAWqH,gCAD5B;AAEA,aAAKnG,OAAL,CAAa9B,aAAb,CAA2BkI,eAA3B,CAA2C,UAA3C;AAHG,aAIA;AACH,aAAKpG,OAAL,CAAapD,WAAb,CAAyBgD,aAAzB,CAAuC,eAAvC,EACKS,SADL,GACiBvB,EAAE,CAACwB,OAAHxB,CAAWuH,oCAD5B;AAEA,aAAKrG,OAAL,CAAa9B,aAAb,CAA2BkI,eAA3B,CAA2C,UAA3C;AACH;;AAED,UAAME,KAAK,GAAG,KAAKrG,SAAL,CAAe,KAAKD,OAAL,CAAapD,WAA5B,EAAyC,KAAKsD,UAAL,CAAgBrD,UAAzD,CAAd;AAEA,WAAKmD,OAAL,CAAapD,WAAb,CAAyBqG,SAAzB,CAAmCsB,GAAnC,CAAuCE,YAAvC;AACH;;;WAED,iCAAwB;AACpB,UAAMA,YAAY,GAAG,4BAArB;AACA,WAAKzE,OAAL,CAAapD,WAAb,CAAyBqG,SAAzB,CAAmCU,MAAnC,CAA0Cc,YAA1C;AACA,WAAKtB,yBAAL;AACA,WAAKsC,8BAAL,CAAoC,OAApC;AACH;;;WAED,kCAAyB3E,CAAzB,EAA4B;AACxB,UAAI,CAACA,CAAC,CAACyF,MAAFzF,CAASlB,aAATkB,CAAuB,yBAAvBA,CAAL,EAAwD;AACpD;AACH;;AACD,UAAM2D,YAAY,GAAG,4BAArB;AACA,WAAKzE,OAAL,CAAapD,WAAb,CAAyBqG,SAAzB,CAAmCU,MAAnC,CAA0Cc,YAA1C;AACA,WAAKtB,yBAAL;AACA,WAAKsC,8BAAL,CAAoC,OAApC;AACH;AAED;AACJ;AACA;;;;;uFACI,kBAAwBH,EAAxB;AAAA;AAAA;AAAA;AAAA;AAAAkB;AAAA,uBACU,KAAKrH,WAAL,CAAiB,QAAjB,EAA2B;AAACsH,oBAAE,EAAEnB;AAAL,iBAA3B,CADV;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;AAIA;AACJ;AACA;;;;;2FACI,kBAA4BA,EAA5B;AAAA;AAAA;AAAA;AAAA;AAAAoB;AAAA,uBACU,KAAKvH,WAAL,CAAiB,QAAjB,EAA2B;AAACsH,oBAAE,EAAEnB,EAAL;AAAS7G,gCAAc,EAAE;AAAzB,iBAA3B,CADV;;AAAA;AAEI,qBAAKkI,iBAAL;;AAFJ;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;wFAKA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAES,KAAKpD,kBAFd;AAAAqD;AAAA;AAAA;;AAAA,kDAGeC,KAAK,CAAC/H,EAAE,CAACwB,OAAHxB,CAAWgI,mDAAZ,CAHpB;;AAAA;AAAA,sBAMQ,KAAK9G,OAAL,CAAa9B,aAAb,CAA2BwH,KAA3B,CAAiCqB,IAAjC,OAA4C,EANpD;AAAAH;AAAA;AAAA;;AAAA,kDAOeC,KAAK,CAAC/H,EAAE,CAACwB,OAAHxB,CAAWkI,kDAAZ,CAPpB;;AAAA;AAUUpD,sBAVV,GAUmB,KAAK4B,gBAAL,GAAwB,QAAxB,GAAmC,QAA5C5B;AAVVgD;AAAA,uBAYU,KAAKzH,WAAL,CAAiByE,MAAjB,EAAyB;AAC3B6C,oBAAE,EAAE,KAAKjB,gBADkB;AAE3BxB,uBAAK,EAAE,KAAKT,kBAFe;AAG3B0D,sBAAI,EAAEC,SAAS,CAAC,KAAKlH,OAAL,CAAa9B,aAAb,CAA2BwH,KAA5B;AAHY,iBAAzB,CAZV;;AAAA;AAAA,sBAkBQ9B,MAAM,KAAK,QAlBnB;AAAAgD;AAAA;AAAA;;AAmBcO,2BAnBd,GAmB6B,YAAM;AACvB,uBAAK,IAAI/E,CAAT,IAAcgF,MAAI,CAAC9I,OAAnB,EAA4B;AACxB,wBAAI8I,MAAI,CAAC9I,OAAL,CAAa8D,CAAb,EAAgB4B,KAAhB,KAA0BoD,MAAI,CAAC7D,kBAAnC,EAAuD;AACnD,6BAAO6D,MAAI,CAAC9I,OAAL,CAAa8D,CAAb,EAAgBqE,EAAvB;AACH;AACJ;AALe,iBAAC,EAAfU;;AAON,qBAAKE,2BAAL,CAAiC,KAAK9D,kBAAtC,cAA8D,KAAKvD,OAAL,CAAa9B,aAAb,CAA2BwH,KAAzF;AA1BRkB;AAAA,uBA2Bc,KAAKU,qBAAL,CAA2BH,WAA3B,CA3Bd;;AAAA;AA8BU1C,4BA9BV,GA8ByB,4BAAfA;AACN,qBAAKzE,OAAL,CAAapD,WAAb,CAAyBqG,SAAzB,CAAmCU,MAAnC,CAA0Cc,YAA1C;AACA,qBAAKe,gBAAL,GAAwB,IAAxB;AACA,qBAAKjC,kBAAL,GAA0B,IAA1B;AACA,qBAAKJ,yBAAL;AACA,qBAAKsC,8BAAL,CAAoC,OAApC;;AAnCJ;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;AAwCA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;;;;iFACI,kBAAkB8B,MAAlB,EAA0B3L,MAA1B,EAAkC4L,gBAAlC;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAAC;AAEQ3I,kBAAE,CAAC4I,QAAH5I;AAFR2I;AAAA,uBAG6B3I,EAAE,CAAC6I,IAAH7I,CAAQ8I,SAAR9I,CAAkB,8CAAlBA,EAAkE;AACnF+I,sBAAI,EAAE;AACFjE,0BAAM,EAAE2D,MADN;AAEFO,+BAAW,EAAEC,IAAI,CAACC,SAALD,CAAenM,MAAfmM,CAFX;AAGFE,6BAAS,EAAEF,IAAI,CAACC,SAALD,CAAe;AACtB,0CAAoB,KAAKnM,MAAL,CAAY8E,gBAAZ,KAAiC,GAAjC,GAAuC,IAAvC,GAA8C,KAD5C;AAEtB,sCAAgB,KAAK9E,MAAL,CAAYsM,YAAZ,KAA6B,GAA7B,GAAmC,IAAnC,GAA0C,KAFpC;AAGtB,oCAAc,KAAKtM,MAAL,CAAYuM,UAAZ,KAA2B,GAA3B,GAAiC,IAAjC,GAAwC,KAHhC;AAItB,oCAAc,KAAKvM,MAAL,CAAYwM,UAAZ,KAA2B,GAA3B,GAAiC,IAAjC,GAAwC,KAJhC;AAKtB,uCAAiB,KAAKxM,MAAL,CAAYwE,aAAZ,KAA8B,GAA9B,GAAoC,IAApC,GAA2C;AALtC,qBAAf2H,CAHT;AAUFM,mCAAe,EAAEN,IAAI,CAACC,SAALD,CAAeP,gBAAfO;AAVf;AAD6E,iBAAlEjJ,CAH7B;;AAAA;AAGcnD,sBAHd,iBAGcA;AAeN,qBAAK2C,OAAL,2BAAe3C,MAAM,CAACkM,IAAPlM,CAAY4C,OAA3B,uEAAsC,KAAKD,OAA3C;AACA,qBAAKE,aAAL,4BAAqB7C,MAAM,CAACkM,IAAPlM,CAAY8C,cAAjC,yEAAmD,KAAKD,aAAxD;AACA,qBAAKE,YAAL,GAAoB/C,MAAM,CAACkM,IAAPlM,CAAYgD,2BAAZhD,GACdA,MAAM,CAACkM,IAAPlM,CAAYgD,2BADEhD,GAEd,EAFN;AAIA,qBAAK2M,MAAL;AACAxJ,kBAAE,CAACyJ,SAAHzJ;AAzBR2I;AAAA;;AAAA;AAAAA;AAAAA;AA2BQzB,uBAAO,CAACC,GAARD;;AA3BR;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;AA+BA;AACJ;AACA;AACA;;;;;2FACQ,kBAA4BuB,MAA5B,EAAoCiB,YAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAAC;AAEI3J,kBAAE,CAAC4I,QAAH5I;AAFJ2J;AAAA,uBAGyB3J,EAAE,CAAC6I,IAAH7I,CAAQ8I,SAAR9I,CAAkB,6CAAlBA,EAAiE;AAClF+I,sBAAI,EAAE;AACFjE,0BAAM,EAAE2D,MADN;AAEFiB,gCAAY,EAAEA;AAFZ;AAD4E,iBAAjE1J,CAHzB;;AAAA;AAGUnD,sBAHV,iBAGUA;;AAON,oBAAIA,MAAM,CAAC+M,MAAP/M,KAAkB,SAAtB,EAAiC;AAC7BmD,oBAAE,CAACqG,aAAHrG,CAAiBE,MAAjBF,EAA0B,gBAA1BA,EAA4C,EAA5CA;AACH;;AAEDA,kBAAE,CAACyJ,SAAHzJ;AAdJ2J;AAAA;;AAAA;AAAAA;AAAAA;AAgBIzC,uBAAO,CAACC,GAARD;;AAhBJ;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;WAoBJ,iCAAwB;AACpB,UAAI,KAAKpK,MAAL,CAAYuE,cAAZ,KAA+B,GAAnC,EAAwC;AACpC,aAAKH,OAAL,CAAatD,iBAAb,CAA+B+D,KAA/B,GAAuC,qBAAvC;AACH;AACJ;;;WAED,gCAAuB;AACnB,UAAI,KAAK7E,MAAL,CAAYwE,aAAZ,KAA8B,GAAlC,EAAuC;AACnC,YAAMuI,MAAM,GAAG,8BAAf;AACA,aAAK3I,OAAL,CAAaxC,gBAAb,CAA8ByF,SAA9B,CAAwCU,MAAxC,CAA+CgF,MAA/C;AACA,YAAMC,WAAW,GAAG/I,QAAQ,CAACgJ,eAAThJ,CAAyBiJ,YAA7C;AACA,YAAMC,YAAY,GAAG,KAAK/I,OAAL,CAAaxC,gBAAb,CAA8BsL,YAAnD;;AACA,YAAIC,YAAY,GAAG,OAAOH,WAA1B,EAAuC;AACnC,eAAK5I,OAAL,CAAaxC,gBAAb,CAA8ByF,SAA9B,CAAwCsB,GAAxC,CAA4CoE,MAA5C;AADJ,eAEO;AACH,eAAK3I,OAAL,CAAaxC,gBAAb,CAA8ByF,SAA9B,CAAwCU,MAAxC,CAA+CgF,MAA/C;AACH;AACJ;AACJ;AAED;;;;WACA,6BAAoB;AAEhB,UAAI,KAAK/M,MAAL,CAAYoN,oBAAZ,KAAqC,GAAzC,EAA8C;AAC1C,YAAMC,WAAW,GAAG,KAAKrE,cAAL,EAApB;;AACA,YAAIqE,WAAW,KAAK,KAAKrN,MAAL,CAAYkJ,eAA5BmE,IAA+CA,WAAW,KAAK,KAAKrN,MAAL,CAAYsN,aAA/E,EAA8F;AAC1F,iBAAO,IAAP;AACH;AACJ;;AACD,aAAO,KAAP;AACH;;;WAED,0BAAiB;AAAA;;AACb,UAAI,KAAKlJ,OAAL,CAAazC,WAAb,KAA6BkE,SAA7B,IAA0C,KAAKzB,OAAL,CAAaxC,gBAAb,KAAkCiE,SAAhF,EAA2F;AACvFK,aAAK,CAACC,SAAND,CAAgBE,KAAhBF,CAAsBG,IAAtBH,CAA2B,KAAK9B,OAAL,CAAaxC,gBAAb,CAA8B0E,UAAzDJ,EAAqEK,OAArEL,CAA6E,aAAC;AAAA,iBAAIM,CAAC,CAACuB,MAAFvB,EAAJ;AAA9E;AAEA,aAAK5D,aAAL,CAAmB2K,KAAnB,CAAyBhH,OAAzB,CAAiC,aAAK;AAClC,cAAMiH,IAAI,GAAGC,MAAI,CAACrJ,OAAL,CAAazC,WAAb,CAAyB8F,SAAzB,CAAmC,IAAnC,CAAb;;AAEA,cAAIgG,MAAI,CAACzN,MAAL,CAAYuM,UAAZ,KAA2B,GAA/B,EAAoC;AAChC,gBAAMmB,KAAK,GAAGD,MAAI,CAACpJ,SAAL,CAAemJ,IAAf,EAAqBC,MAAI,CAACnJ,UAAL,CAAgBzC,aAArC,CAAd;;AACA6L,iBAAK,CAACC,GAAND,GAAYlH,CAAC,CAACoH,OAAdF;AACH;;AAED,cAAM5L,WAAW,GAAG2L,MAAI,CAACpJ,SAAL,CAAemJ,IAAf,EAAqBC,MAAI,CAACnJ,UAAL,CAAgBxC,WAArC,CAApB;;AACAA,qBAAW,CAAC+L,IAAZ/L,GAAmB0E,CAAC,CAACsH,eAArBhM;AACAA,qBAAW,CAACiM,SAAZjM,GAAwB0E,CAAC,CAAC6E,IAA1BvJ;;AAEA,cAAI2L,MAAI,CAACzN,MAAL,CAAYwM,UAAZ,KAA2B,GAA/B,EAAoC;AAChC,gBAAMzK,YAAY,GAAG0L,MAAI,CAACpJ,SAAL,CAAemJ,IAAf,EAAqBC,MAAI,CAACnJ,UAAL,CAAgBvC,YAArC,CAArB;;AACA,gBAAMiM,KAAK,qBAAcxH,CAAC,CAACyH,KAAhB,cAAX;AACA,gBAAMC,YAAY,qBAAc1H,CAAC,CAAC2H,QAAhB,eAAlB;AACA,gBAAMC,SAAS,mBAAY5H,CAAC,CAAC6H,UAAd,YAAf;AACA,gBAAMC,gBAAgB,mBAAY9H,CAAC,CAAC2H,QAAd,YAAtB;AACApM,wBAAY,CAACgM,SAAbhM,GAAyBiM,KAAK,GAAGE,YAARF,GAAuBI,SAAvBJ,GAAmCM,gBAA5DvM;AACH;;AAED,cAAI0L,MAAI,CAACzN,MAAL,CAAYsM,YAAZ,KAA6B,GAAjC,EAAsC;AAClC,gBAAMtK,iBAAiB,GAAGyL,MAAI,CAACpJ,SAAL,CAAemJ,IAAf,EAAqBC,MAAI,CAACnJ,UAAL,CAAgBtC,iBAArC,CAA1B;;AACA,gBAAMuM,QAAQ,qBAAc/H,CAAC,CAACgI,QAAhB,eAAd;AACA,gBAAMC,OAAO,mBAAYjI,CAAC,CAACkI,YAAd,aAAb;AACA,gBAAMC,IAAI,mBAAYzL,EAAE,CAACwB,OAAHxB,CAAW0L,8BAAvB,aAAV;AACA,gBAAMC,UAAU,qBAAcrI,CAAC,CAACsI,WAAhB,cAAhB;AACA,gBAAMC,QAAQ,qBAAcvI,CAAC,CAAC2H,QAAhB,eAAd;AACAnM,6BAAiB,CAAC+L,SAAlB/L,GAA8BuM,QAAQ,GAAGE,OAAXF,GAAqBI,IAArBJ,GAA4BM,UAA5BN,GAAyCQ,QAAvE/M;AACH;;AAED,cAAME,gBAAgB,GAAGuL,MAAI,CAACpJ,SAAL,CAAemJ,IAAf,EAAqBC,MAAI,CAACnJ,UAAL,CAAgBpC,gBAArC,CAAzB;;AACAA,0BAAgB,CAAC+C,gBAAjB/C,CAAkC,OAAlCA,EAA2C;AAAA,mBAAMuL,MAAI,CAACuB,qBAAL,CAA2B,QAA3B,EAAqCxI,CAAC,CAACyI,SAAvC,CAAN;AAA3C;;AAGAxB,gBAAI,CAACrJ,OAAL,CAAaxC,gBAAb,CAA8B8F,WAA9B,CAA0C8F,IAA1C;AAnCJ;AAqCH;;AAED,UAAI,KAAKpJ,OAAL,CAAa1C,cAAb,KAAgCmE,SAAhC,IAA6C,KAAKzB,OAAL,CAAaxC,gBAAb,KAAkCiE,SAAnF,EAA8F;AAC1F,YAAI,KAAKjD,aAAL,CAAmBoD,cAAnB,GAAoC,CAAxC,EAA2C;AACvC,eAAK5B,OAAL,CAAaxC,gBAAb,CAA8BiD,KAA9B,GAAsC,iBAAtC;AACA,eAAKT,OAAL,CAAa1C,cAAb,CAA4BmD,KAA5B,GAAoC,iBAApC;AACA,eAAKT,OAAL,CAAanC,cAAb,CAA4B4C,KAA5B,GAAoC,iBAApC;AAHJ,eAIO;AACH,eAAKT,OAAL,CAAa1C,cAAb,CAA4BmD,KAA5B,GAAoC,gBAApC;AACA,eAAKT,OAAL,CAAaxC,gBAAb,CAA8BiD,KAA9B,GAAsC,gBAAtC;AACA,eAAKT,OAAL,CAAanC,cAAb,CAA4B4C,KAA5B,GAAoC,gBAApC;AACH;AACJ;AACJ;;;WAED,4BAAmB;AACf,UAAI,KAAKT,OAAL,CAAa3C,gBAAb,KAAkCoE,SAAtC,EAAiD;AAE7C,YAAI,KAAKjD,aAAL,CAAmBoD,cAAnB,GAAoC,CAAxC,EAA2C;AACvC,eAAK5B,OAAL,CAAa3C,gBAAb,CAA8BoD,KAA9B,GAAsC,iBAAtC;AACA,cAAMqK,SAAS,mBAAYhM,EAAE,CAACwB,OAAHxB,CAAW0L,8BAAvB,aAAf;AACA,cAAMO,eAAe,qBAAcC,MAAM,CAAC,KAAKxM,aAAL,CAAmByM,WAApB,CAAND,CAAuCE,OAAvCF,CAA+C,CAA/CA,CAAd,cAArB;AACA,cAAMG,kBAAkB,qBAAc,KAAK3M,aAAL,CAAmBuL,QAAjC,cAAxB;AACA,eAAK/J,OAAL,CAAa3C,gBAAb,CAA8BsM,SAA9B,GAA0CmB,SAAS,GAAGC,eAAZD,GAA8BK,kBAAxE;AALJ,eAMO;AACH,eAAKnL,OAAL,CAAa3C,gBAAb,CAA8BoD,KAA9B,GAAsC,gBAAtC;AACH;AACJ;AACJ;;;WAED,yBAAgB;AAAA;;AAEZ,UAAMjC,aAAa,GAAG,KAAKF,OAAL,CAAayH,MAAb,CAAoB,aAAC;AAAA,eAAI3D,CAAC,CAAC3D,cAAN;AAArB,SAA2C,CAA3C,CAAtB;AACAqD,WAAK,CAACC,SAAND,CAAgBE,KAAhBF,CAAsBG,IAAtBH,CAA2B,KAAK9B,OAAL,CAAa/D,YAAxC6F,EAAsDK,OAAtDL,CAA8D,aAAC;AAAA,eAAIM,CAAC,CAAC3B,KAAF2B,gCAAgC5D,aAAa,CAACwF,KAA9C,MAAJ;AAA/D;AACA,WAAKhE,OAAL,CAAahE,WAAb,CAAyBqE,SAAzB,GAAqC7B,aAAa,CAAC4M,IAAd5M,GAC9BA,aAAa,CAACyI,IAAdzI,GAAqBA,aAAa,CAACyI,IAAnCzI,GAA0CM,EAAE,CAACwB,OAAHxB,CAAWuM,8BADvB7M,GAE9BA,aAAa,CAACyI,IAAdzI,GAAqBA,aAAa,CAACyI,IAAnCzI,GAA0CM,EAAE,CAACwB,OAAHxB,CAAWwM,8BAF5D;;AAIA,UAAI,KAAKtL,OAAL,CAAa9D,eAAb,KAAiCuF,SAArC,EAAgD;AAC5C,aAAKzB,OAAL,CAAa9D,eAAb,CAA6BmE,SAA7B,GAAyC,KAAK7B,aAAL,CAAmBoD,cAA5D;AACH;;AAED,UAAM2J,sBAAsB,GAAG,KAAKC,aAAL,EAA/B;AACA1J,WAAK,CAACC,SAAND,CAAgBE,KAAhBF,CAAsBG,IAAtBH,CAA2B,KAAK9B,OAAL,CAAa5D,WAAb,CAAyB8F,UAApDJ,EAAiEK,OAAjEL,CAAyE,aAAC;AAAA,eAAIM,CAAC,CAACuB,MAAFvB,EAAJ;AAA1E;AACAmJ,4BAAsB,CAACpJ,OAAvBoJ,CAA+B,aAAC;AAAA,eAAIE,MAAI,CAACzL,OAAL,CAAa5D,WAAb,CAAyBkH,WAAzB,CAAqClB,CAArC,CAAJ;AAAhC;AACIN,WAAK,CAACC,SAAND,CAAgBE,KAAhBF,CAAsBG,IAAtBH,CAA2B,KAAK9B,OAAL,CAAa9C,gBAAb,CAA8BgF,UAAzDJ,EAAqEK,OAArEL,CAA6E,aAAK;AAC9E,YAAIM,CAAC,YAAYC,cAAjB,EAAiC;AAC7BD,WAAC,CAACvB,gBAAFuB,CAAmB,OAAnBA,EAA4BqJ,MAAI,CAACnJ,iBAAL,CAAuBpB,IAAvB,CAA4BuK,MAA5B,CAA5BrJ;AACH;AAHL;AAKP;;;WAED,qCAA4B;AAAA;;AAExB,UAAI,CAAC,KAAKhD,uBAAV,EAAmC;AAC/B;AACH;;AAED,UAAMmM,sBAAsB,GAAG,KAAKG,sBAAL,CAA4B,KAAKC,iBAAL,CAAuBzK,IAAvB,CAA4B,IAA5B,CAA5B,CAA/B;AACAY,WAAK,CAACC,SAAND,CAAgBE,KAAhBF,CAAsBG,IAAtBH,CAA2B,KAAK1C,uBAAL,CAA6B8C,UAAxDJ,EAAoEK,OAApEL,CAA4E,aAAC;AAAA,eAAIM,CAAC,CAACuB,MAAFvB,EAAJ;AAA7E;AACAmJ,4BAAsB,CAACpJ,OAAvBoJ,CAA+B,aAAC;AAAA,eAAIK,MAAI,CAACxM,uBAAL,CAA6BkE,WAA7B,CAAyClB,CAAzC,CAAJ;AAAhC;AAEH;AAED;AACJ;AACA;;;;WACI,yBAAgB;AAAA;;AACZ,UAAMyJ,WAAW,GAAG,KAAKvN,OAAL,CAAayH,MAAb,CAAoB,aAAC;AAAA,eAAI,CAAC+F,OAAO,CAAC1J,CAAC,CAAC3D,cAAH,CAAZ;AAArB,QAApB;AACA,UAAM8M,sBAAsB,GAAGM,WAAW,CAAC9H,GAAZ8H,CAAgB,aAAK;AAChD,YAAMxH,IAAI,GAAG0H,MAAI,CAAC/L,OAAL,CAAa3D,UAAb,CAAwBgH,SAAxB,CAAkC,IAAlC,CAAb;;AACAgB,YAAI,CAACxD,gBAALwD,CAAsB,OAAtBA,EAA+B,aAAK;AAChC,cAAI0H,MAAI,CAAC7L,UAAL,CAAgB7D,UAAhB,KAA+ByE,CAAC,CAACkC,aAAFlC,CAAgBkL,OAAhBlL,CAAwB,QAAxBA,CAAnC,EAAsE;AAClEiL,kBAAI,CAACzE,qBAAL,CAA2BlF,CAAC,CAACqE,EAA7B;AACH;AAHL;AAKAsF,cAAI,CAAC9L,SAAL,CAAeoE,IAAf,EAAqB0H,MAAI,CAAC7L,UAAL,CAAgB3D,UAArC,EAAiDkE,KAAjD,gCAA+E2B,CAAC,CAAC4B,KAAjF;AACA+H,cAAI,CAAC9L,SAAL,CAAeoE,IAAf,EAAqB0H,MAAI,CAAC7L,UAAL,CAAgB9C,SAArC,EAAgDiD,SAAhD,GAA4D+B,CAAC,CAACgJ,IAAFhJ,GACrDA,CAAC,CAAC6E,IAAF7E,GAASA,CAAC,CAAC6E,IAAX7E,GAAkBtD,EAAE,CAACwB,OAAHxB,CAAWuM,8BADwBjJ,GAErDA,CAAC,CAAC6E,IAAF7E,GAASA,CAAC,CAAC6E,IAAX7E,GAAkBtD,EAAE,CAACwB,OAAHxB,CAAWwM,8BAFpC;;AAKA,YAAIlJ,CAAC,CAACgJ,IAAN,EAAY;AACRW,gBAAI,CAAC9L,SAAL,CAAeoE,IAAf,EAAqB0H,MAAI,CAAC7L,UAAL,CAAgB1D,WAArC,EAAkDmH,MAAlD;;AACAoI,gBAAI,CAAC9L,SAAL,CAAeoE,IAAf,EAAqB0H,MAAI,CAAC7L,UAAL,CAAgBzD,SAArC,EAAgDkH,MAAhD;AAFJ,eAGO;AACHoI,gBAAI,CAAC9L,SAAL,CAAeoE,IAAf,EAAqB0H,MAAI,CAAC7L,UAAL,CAAgB1D,WAArC,EACKqE,gBADL,CACsB,OADtB,EACgC,aAAK;AAC7BC,aAAC,CAACmL,eAAFnL;;AACAiL,kBAAI,CAACG,iBAAL,CAAuB9J,CAAC,CAACqE,EAAzB;AAFuB,WAAC,CAGzBvF,IAHyB,CAGpB6K,MAHoB,CADhC;;AAMAA,gBAAI,CAAC9L,SAAL,CAAeoE,IAAf,EAAqB0H,MAAI,CAAC7L,UAAL,CAAgBzD,SAArC,EAAgDoE,gBAAhD,CAAiE,OAAjE,EAA0E,aAAK;AAC3EC,aAAC,CAACmL,eAAFnL;;AACAiL,kBAAI,CAAC5K,oBAAL,CAA0BL,CAA1B,EAA6BsB,CAAC,CAAC4B,KAA/B,EAAsC5B,CAAC,CAACqE,EAAxC,EAA4CrE,CAAC,CAAC6E,IAA9C;AAFJ;AAIH;;AAED5C,YAAI,CAACxD,gBAALwD,CAAsB,WAAtBA,EAAmC0H,MAAI,CAACI,iBAAL,CAAuBjL,IAAvB,CAA4B6K,MAA5B,CAAnC1H;AACAA,YAAI,CAACxD,gBAALwD,CAAsB,UAAtBA,EAAkC0H,MAAI,CAAC3K,iBAAL,CAAuBF,IAAvB,CAA4B6K,MAA5B,CAAlC1H;AAEA,eAAOA,IAAP;AAhC2B,QAA/B;AAmCA,aAAOkH,sBAAP;AACH;AAED;AACJ;AACA;;;;WACI,kCAAyB;AAAA;;AACrB,UAAMM,WAAW,GAAG,KAAKvN,OAAL,CAAayH,MAAb,CAAoB,aAAC;AAAA,eAAI,CAAC+F,OAAO,CAAC1J,CAAC,CAAC3D,cAAH,CAAZ;AAArB,QAApB;AACA,UAAM8M,sBAAsB,GAAGM,WAAW,CAAC9H,GAAZ8H,CAAgB,aAAK;AAChD,YAAMxH,IAAI,GAAG+H,OAAI,CAACpM,OAAL,CAAa3D,UAAb,CAAwBgH,SAAxB,CAAkC,IAAlC,CAAb;;AACAgB,YAAI,CAACxD,gBAALwD,CAAsB,OAAtBA,EAA+B,aAAK;AAChC,cAAI+H,OAAI,CAAClM,UAAL,CAAgB7D,UAAhB,KAA+ByE,CAAC,CAACkC,aAAFlC,CAAgBkL,OAAhBlL,CAAwB,QAAxBA,CAAnC,EAAsE;AAClEsL,mBAAI,CAACT,iBAAL,CAAuBvJ,CAAC,CAACqE,EAAzB;AACH;AAHL;AAKA2F,eAAI,CAACnM,SAAL,CAAeoE,IAAf,EAAqB+H,OAAI,CAAClM,UAAL,CAAgB3D,UAArC,EAAiDkE,KAAjD,gCAA+E2B,CAAC,CAAC4B,KAAjF;AACAoI,eAAI,CAACnM,SAAL,CAAeoE,IAAf,EAAqB+H,OAAI,CAAClM,UAAL,CAAgB9C,SAArC,EAAgDiD,SAAhD,GAA4D+B,CAAC,CAACgJ,IAAFhJ,GACrDA,CAAC,CAAC6E,IAAF7E,GAASA,CAAC,CAAC6E,IAAX7E,GAAkBtD,EAAE,CAACwB,OAAHxB,CAAWuM,8BADwBjJ,GAErDA,CAAC,CAAC6E,IAAF7E,GAASA,CAAC,CAAC6E,IAAX7E,GAAkBtD,EAAE,CAACwB,OAAHxB,CAAWwM,8BAFpC;;AAKAc,eAAI,CAACnM,SAAL,CAAeoE,IAAf,EAAqB+H,OAAI,CAAClM,UAAL,CAAgB1D,WAArC,EAAkDmH,MAAlD;;AACAyI,eAAI,CAACnM,SAAL,CAAeoE,IAAf,EAAqB+H,OAAI,CAAClM,UAAL,CAAgBzD,SAArC,EAAgDkH,MAAhD;;AAEAU,YAAI,CAACxD,gBAALwD,CAAsB,WAAtBA,EAAmC+H,OAAI,CAACD,iBAAL,CAAuBjL,IAAvB,CAA4BkL,OAA5B,CAAnC/H;AACAA,YAAI,CAACxD,gBAALwD,CAAsB,UAAtBA,EAAkC+H,OAAI,CAAChL,iBAAL,CAAuBF,IAAvB,CAA4BkL,OAA5B,CAAlC/H;AAEA,eAAOA,IAAP;AAnB2B,QAA/B;AAsBA,aAAOkH,sBAAP;AACH;;;WAED,2CAAkC;AAC9B,UAAI,KAAK3P,MAAL,CAAYyQ,iBAAZ,KAAkC,SAAtC,EAAiD;AAC7C,aAAK/M,IAAL,CAAUmB,KAAV,0BAAkC6L,IAAI,CAACC,KAALD,CAAW,KAAKhN,IAAL,CAAUkN,YAAV,GAAyB,CAApCF,CAAlC;AACH;AACJ;;;WAED,qCAA4B;AAAA;;AAExB,UAAMG,SAAS,GAAG,oBAAlB;;AAEA,UAAI,KAAK/N,YAAL,CAAkBgO,KAAlB,IAA2B,KAAKhO,YAAL,CAAkBgO,KAAlB,CAAwBC,SAAvD,EAAkE;AAE9D,YAAMC,UAAU,GAAG,KAAKC,sBAAL,CAA4B/N,EAAE,CAACwB,OAAHxB,CAAWgO,kCAAvC,CAAnB;AACA,YAAMjJ,KAAK,GAAG,KAAKkJ,6BAAL,CAAmC,KAAKrO,YAAL,CAAkBgO,KAAlB,CAAwBC,SAA3D,CAAd;AACA,YAAMK,UAAU,GAAG,KAAKH,sBAAL,aAAgC,KAAKnO,YAAL,CAAkBgO,KAAlB,CAAwBO,QAAxD,SAAqE,sBAArE,CAAnB;AACA,YAAMC,SAAS,GAAG,KAAKL,sBAAL,CAA4B/N,EAAE,CAACwB,OAAHxB,CAAWqO,iCAAvC,CAAlB;AAEA,aAAKnN,OAAL,CAAahC,uBAAb,CAAqCsF,WAArC,CAAiDsJ,UAAjD;AACA,aAAK5M,OAAL,CAAahC,uBAAb,CAAqCsF,WAArC,CAAiDO,KAAjD;AACA,aAAK7D,OAAL,CAAahC,uBAAb,CAAqCsF,WAArC,CAAiD0J,UAAjD;AACA,aAAKhN,OAAL,CAAahC,uBAAb,CAAqCsF,WAArC,CAAiD4J,SAAjD;AACH;;AAED,UAAI,KAAKxO,YAAL,CAAkBgO,KAAlB,IAA2B,KAAKhO,YAAL,CAAkBgO,KAAlB,CAAwBU,OAAvD,EAAgE;AAE5D,YAAMC,EAAE,GAAGxN,QAAQ,CAACyN,aAATzN,CAAuB,IAAvBA,CAAX;;AACA,YAAM+M,WAAU,GAAG,KAAKC,sBAAL,CAA4B/N,EAAE,CAACwB,OAAHxB,CAAWwM,8BAAvC,CAAnB;;AACA,YAAMzH,MAAK,GAAG,KAAKkJ,6BAAL,CAAmC,KAAKrO,YAAL,CAAkBgO,KAAlB,CAAwBU,OAA3D,CAAd;;AACA,YAAMF,UAAS,GAAG,KAAKL,sBAAL,CAA4B/N,EAAE,CAACwB,OAAHxB,CAAWyO,2BAAvC,CAAlB;;AACA,YAAMP,WAAU,GAAG,KAAKH,sBAAL,aAAgC,KAAKnO,YAAL,CAAkBgO,KAAlB,CAAwBc,MAAxD,SAAmE,sBAAnE,CAAnB;;AAEA,aAAKxN,OAAL,CAAahC,uBAAb,CAAqCsF,WAArC,CAAiD+J,EAAjD;AACA,aAAKrN,OAAL,CAAahC,uBAAb,CAAqCsF,WAArC,CAAiDsJ,WAAjD;AACA,aAAK5M,OAAL,CAAahC,uBAAb,CAAqCsF,WAArC,CAAiDO,MAAjD;AACA,aAAK7D,OAAL,CAAahC,uBAAb,CAAqCsF,WAArC,CAAiD0J,WAAjD;AACA,aAAKhN,OAAL,CAAahC,uBAAb,CAAqCsF,WAArC,CAAiD4J,UAAjD;AACH;;AAED,UAAG,KAAKxO,YAAL,CAAkB+O,MAAlB,IAA4B,KAAK/O,YAAL,CAAkB+O,MAAlB,CAAyBd,SAArD,IAAkE,KAAKjO,YAAL,CAAkB+O,MAAlB,CAAyBL,OAA9F,EAAuG;AAEnG,YAAMR,YAAU,GAAG,KAAKC,sBAAL,CAA4B/N,EAAE,CAACwB,OAAHxB,CAAW4O,qCAAvC,CAAnB;;AACA,YAAMC,MAAM,GAAG,KAAKZ,6BAAL,CAAmC,KAAKrO,YAAL,CAAkB+O,MAAlB,CAAyBd,SAA5D,CAAf;AACA,YAAMiB,WAAW,GAAG,KAAKf,sBAAL,aAAgC,KAAKnO,YAAL,CAAkB+O,MAAlB,CAAyBR,QAAzD,SAAsE,sBAAtE,CAApB;;AACA,YAAMI,GAAE,GAAGxN,QAAQ,CAACyN,aAATzN,CAAuB,IAAvBA,CAAX;;AACA,YAAMqN,WAAS,GAAGW,GAAG,CAAChB,sBAAJgB,CAA2B/O,EAAE,CAACwB,OAAHxB,CAAWgP,mCAAtCD,CAAlB;;AACA,YAAME,MAAM,GAAG,KAAKhB,6BAAL,CAAmC,KAAKrO,YAAL,CAAkB+O,MAAlB,CAAyBL,OAA5D,CAAf;AACA,YAAMY,WAAW,GAAG,KAAKnB,sBAAL,aAAgC,KAAKnO,YAAL,CAAkB+O,MAAlB,CAAyBD,MAAzD,SAAoE,sBAApE,CAApB;AAEA,aAAKxN,OAAL,CAAahC,uBAAb,CAAqCsF,WAArC,CAAiDsJ,YAAjD;AACA,aAAK5M,OAAL,CAAahC,uBAAb,CAAqCsF,WAArC,CAAiDqK,MAAjD;AACA,aAAK3N,OAAL,CAAahC,uBAAb,CAAqCsF,WAArC,CAAiDsK,WAAjD;AACA,aAAK5N,OAAL,CAAahC,uBAAb,CAAqCsF,WAArC,CAAiD+J,GAAE,CAAChK,SAAHgK,CAAa,IAAbA,CAAjD;AACA,aAAKrN,OAAL,CAAahC,uBAAb,CAAqCsF,WAArC,CAAiD4J,WAAjD;AACA,aAAKlN,OAAL,CAAahC,uBAAb,CAAqCsF,WAArC,CAAiDyK,MAAjD;AACA,aAAK/N,OAAL,CAAahC,uBAAb,CAAqCsF,WAArC,CAAiD0K,WAAjD;AACA,aAAKhO,OAAL,CAAahC,uBAAb,CAAqCsF,WAArC,CAAiD+J,GAAjD;AACH;;AAED,UAAI,KAAK3O,YAAL,CAAkBuP,WAAlB,IAAiC,KAAKvP,YAAL,CAAkBuP,WAAlB,CAA8BpI,MAA9B,GAAuC,CAA5E,EAA+E;AAC3E,aAAKnH,YAAL,CAAkBuP,WAAlB,CAA8B9L,OAA9B,CAAsC,aAAK;AAEvC,cAAMyK,UAAU,GAAGsB,OAAI,CAACrB,sBAAL,CAA4B/N,EAAE,CAACwB,OAAHxB,CAAWqP,6BAAvC,CAAnB;;AACA,cAAMR,MAAM,GAAGO,OAAI,CAACnB,6BAAL,CAAmCmB,OAAI,CAACxP,YAAL,CAAkB+O,MAAlB,CAAyBd,SAA5D,CAAf;;AACA,cAAMiB,WAAW,GAAGM,OAAI,CAACrB,sBAAL,aAAgCqB,OAAI,CAACxP,YAAL,CAAkB+O,MAAlB,CAAyBR,QAAzD,SAAsE,sBAAtE,CAApB;;AACA,cAAMC,SAAS,GAAGgB,OAAI,CAACrB,sBAAL,CAA4B/N,EAAE,CAACwB,OAAHxB,CAAWsP,+BAAvC,CAAlB;;AACA,cAAML,MAAM,GAAGG,OAAI,CAACnB,6BAAL,CAAmCmB,OAAI,CAACxP,YAAL,CAAkB+O,MAAlB,CAAyBL,OAA5D,CAAf;;AACA,cAAMY,WAAW,GAAGE,OAAI,CAACrB,sBAAL,aAAgCqB,OAAI,CAACxP,YAAL,CAAkB+O,MAAlB,CAAyBD,MAAzD,SAAoE,sBAApE,CAApB;;AACA,cAAMH,EAAE,GAAGxN,QAAQ,CAACyN,aAATzN,CAAuB,IAAvBA,CAAX;;AAEAqO,iBAAI,CAAClO,OAAL,CAAahC,uBAAb,CAAqCsF,WAArC,CAAiDsJ,UAAjD;;AACAsB,iBAAI,CAAClO,OAAL,CAAahC,uBAAb,CAAqCsF,WAArC,CAAiDqK,MAAjD;;AACAO,iBAAI,CAAClO,OAAL,CAAahC,uBAAb,CAAqCsF,WAArC,CAAiDsK,WAAjD;;AACAM,iBAAI,CAAClO,OAAL,CAAahC,uBAAb,CAAqCsF,WAArC,CAAiD4J,SAAjD;;AACAgB,iBAAI,CAAClO,OAAL,CAAahC,uBAAb,CAAqCsF,WAArC,CAAiDyK,MAAjD;;AACAG,iBAAI,CAAClO,OAAL,CAAahC,uBAAb,CAAqCsF,WAArC,CAAiD0K,WAAjD;;AACAE,iBAAI,CAAClO,OAAL,CAAahC,uBAAb,CAAqCsF,WAArC,CAAiD+J,EAAjD;AAhBJ;AAkBH;;AAED,UACI,KAAK3O,YAAL,CAAkB2P,mBAAlB,IACG,KAAK3P,YAAL,CAAkB2P,mBAAlB,CAAsCC,aADzC,IAEGxM,KAAK,CAACyM,OAANzM,CAAc,KAAKpD,YAAL,CAAkB2P,mBAAlB,CAAsCG,YAApD1M,CAHP,EAIE;AAEE,YAAM8K,YAAU,GAAG,KAAKC,sBAAL,CAA4B/N,EAAE,CAACwB,OAAHxB,CAAW2P,8BAAvC,CAAnB;;AACA,YAAMC,OAAO,GAAG,KAAK7B,sBAAL,WAA+B,KAAKnO,YAAL,CAAkB2P,mBAAlB,CAAsCG,YAAtC,CAAmD,CAAnD,CAA/B,OAAhB;AAEA,aAAKxO,OAAL,CAAahC,uBAAb,CAAqCsF,WAArC,CAAiDsJ,YAAjD;AACA,aAAK5M,OAAL,CAAahC,uBAAb,CAAqCsF,WAArC,CAAiDoL,OAAjD;;AAEA,YAAI,KAAKhQ,YAAL,CAAkB2P,mBAAlB,CAAsCG,YAAtC,CAAmD3I,MAAnD,GAA4D,CAAhE,EAAmE;AAC/D,cAAM8I,WAAW,GAAG,KAAK9B,sBAAL,CAA4B/N,EAAE,CAACwB,OAAHxB,CAAW8P,4BAAvC,CAApB;AACA,eAAK5O,OAAL,CAAahC,uBAAb,CAAqCsF,WAArC,CAAiDqL,WAAjD;AACH;;AAED,YAAMtB,IAAE,GAAGxN,QAAQ,CAACyN,aAATzN,CAAuB,IAAvBA,CAAX;;AACA,YAAMgP,WAAW,GAAG,KAAKhC,sBAAL,CAA4B/N,EAAE,CAACwB,OAAHxB,CAAWgQ,6BAAvC,CAApB;;AACA,YAAMjL,OAAK,GAAG,KAAKkJ,6BAAL,CAAmC,KAAKrO,YAAL,CAAkB2P,mBAAlB,CAAsCC,aAAzE,CAAd;;AACA,YAAMtB,YAAU,GAAG,KAAKH,sBAAL,aAAgC,KAAKnO,YAAL,CAAkB2P,mBAAlB,CAAsCU,YAAtE,SAAuF,sBAAvF,CAAnB;;AAEA,aAAK/O,OAAL,CAAahC,uBAAb,CAAqCsF,WAArC,CAAiD+J,IAAjD;AACA,aAAKrN,OAAL,CAAahC,uBAAb,CAAqCsF,WAArC,CAAiDuL,WAAjD;AACA,aAAK7O,OAAL,CAAahC,uBAAb,CAAqCsF,WAArC,CAAiDO,OAAjD;AACA,aAAK7D,OAAL,CAAahC,uBAAb,CAAqCsF,WAArC,CAAiD0J,YAAjD;AAEH;;AAED,UAAI,KAAKhN,OAAL,CAAahC,uBAAb,CAAqCkE,UAArC,CAAgD2D,MAAhD,GAAyD,CAA7D,EAAgE;AAC5D,aAAKmJ,kBAAL;AACH;AACJ;;;WAED,8BAAqB;AAAA;;AAEjB,UAAMvC,SAAS,GAAG,oBAAlB;AAEA,WAAKzM,OAAL,CAAa/B,8BAAb,CAA4CmI,eAA5C,CAA4D,OAA5D;AAEA,WAAKpG,OAAL,CAAa/B,8BAAb,CAA4CgF,SAA5C,CAAsDsB,GAAtD,CAA0DkI,SAA1D;AACAwC,gBAAU,CAAC,YAAM;AACbC,eAAI,CAAClP,OAAL,CAAa/B,8BAAb,CAA4CgF,SAA5C,CAAsDU,MAAtD,CAA6D8I,SAA7D;;AACAwC,kBAAU,CAAC,YAAM;AACbC,iBAAI,CAAClP,OAAL,CAAa/B,8BAAb,CAA4C2C,YAA5C,CAAyD,OAAzD,EAAkE,gBAAlE;;AACAkB,eAAK,CAACC,SAAND,CAAgBE,KAAhBF,CACKG,IADLH,CACUoN,OAAI,CAAClP,OAAL,CAAahC,uBAAb,CAAqCkE,UAD/CJ,EAEKK,OAFLL,CAEa,aAAC;AAAA,mBAAIM,CAAC,CAACuB,MAAFvB,EAAJ;AAFd;AAFM,WAKP,IALO,CAAV6M;AAFM,SAQP,IARO,CAAVA;AASH;;;WAED,8BAAqB;AAAA;;AACjB,UAAMxC,SAAS,GAAG,oBAAlB;AACA,WAAKzM,OAAL,CAAa/B,8BAAb,CAA4CgF,SAA5C,CAAsDU,MAAtD,CAA6D8I,SAA7D;AACAwC,gBAAU,CAAC,YAAM;AACbE,eAAI,CAACnP,OAAL,CAAa/B,8BAAb,CAA4C2C,YAA5C,CAAyD,OAAzD,EAAkE,gBAAlE;;AACAkB,aAAK,CAACC,SAAND,CAAgBE,KAAhBF,CACKG,IADLH,CACUqN,OAAI,CAACnP,OAAL,CAAahC,uBAAb,CAAqCkE,UAD/CJ,EAEKK,OAFLL,CAEa,aAAC;AAAA,iBAAIM,CAAC,CAACuB,MAAFvB,EAAJ;AAFd;AAFM,SAKP,IALO,CAAV6M;AAMH;;;WAED,2BAAkB;AACd,aAAO,KAAK3P,IAAL,CAAU8P,WAAV,GAAwB,EAA/B;AACH;;;WAED,2BAAkBtO,CAAlB,EAAqB;AACjBuO,kBAAY,CAAC,KAAKjR,YAAN,CAAZiR;AAEA,UAAMC,cAAc,GAAGxO,CAAC,CAACkC,aAAzB;AACA,UAAMuM,QAAQ,GAAGzO,CAAC,CAAC0O,OAAnB;AACA,UAAMC,QAAQ,GAAG3O,CAAC,CAAC4O,OAAnB;AAEA,WAAKtR,YAAL,GAAoB6Q,UAAU,CAAC,UAASK,cAAT,EAAyBC,QAAzB,EAAmCE,QAAnC,EAA6C;AAAA;;AAExE,YAAMlF,IAAI,GAAG,KAAKtK,SAAL,CAAeqP,cAAf,EAA+B,KAAKpP,UAAL,CAAgB9C,SAA/C,EAA0DuS,WAAvE;AACA,aAAK3P,OAAL,CAAa7B,OAAb,CAAqBkC,SAArB,GAAiCkK,IAAjC;AACA,YAAMqF,WAAW,GAAG,KAAKC,eAAL,EAApB;AAEA,YAAMC,SAAS,GAAG,CAAC,KAAK9P,OAAL,CAAa7B,OAAb,CAAqBqF,YAArB,CAAkC,OAAlC,EAA2CY,QAA3C,CAAoD,SAApD,CAAD,IACXwL,WAAW,IAAI,KAAK5P,OAAL,CAAa7B,OAAb,CAAqB4R,WAD3C;;AAGA,YAAID,SAAJ,EAAe;AACX,cAAME,KAAK,GAAGhR,MAAM,CAACiR,UAAPjR,GAAoBuQ,QAApBvQ,GAA+B,EAA7C;AACA,cAAMkR,GAAG,GAAGT,QAAQ,GAAG,EAAvB;AACA,eAAKzP,OAAL,CAAa7B,OAAb,CAAqBsC,KAArB,wCAA2DuP,KAA3D,sBAA4EE,GAA5E;AACAjB,oBAAU,CAAC,YAAM;AACbkB,mBAAI,CAACnQ,OAAL,CAAa7B,OAAb,CAAqBsC,KAArB,GAA6B,sBAA7B;AADM,aAEP,IAFO,CAAVwO;AAJJ,eAOO;AACH,eAAKjP,OAAL,CAAa7B,OAAb,CAAqBsC,KAArB,GAA6B,sBAA7B;AACH;AAlB0B,QAmB7BS,IAnB6B,CAmBxB,IAnBwB,EAmBlBoO,cAnBkB,EAmBFC,QAnBE,EAmBQE,QAnBR,CAAD,EAmBoB,GAnBpB,CAA9B;AAoBH;;;WAED,2BAAkB3O,CAAlB,EAAqB;AAEjBuO,kBAAY,CAAC,KAAKjR,YAAN,CAAZiR;AACA,UAAM9I,MAAM,GAAGzF,CAAC,CAACyF,MAAFzF,CAAS0C,YAAT1C,CAAsB,aAAtBA,CAAf;AACA,UAAMkC,aAAa,GAAGlC,CAAC,CAACkC,aAAFlC,CAAgB0C,YAAhB1C,CAA6B,aAA7BA,CAAtB;;AACA,UAAIyF,MAAM,KAAKvD,aAAf,EAA8B;AAC1B;AACH;;AACD,WAAKhD,OAAL,CAAa7B,OAAb,CAAqBsC,KAArB,GAA6B,sBAA7B;AACH;;;;uFAED,kBAAwB6E,EAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAEU8K,2BAFV,GAEwB,KAAK/Q,oBAAL,CAA0B0E,GAA1B,CAA8B,aAAC;AAAA,yBAAK;AACpD0C,sBAAE,EAAErE,CAAC,CAACqE,EAD8C;AAEpD4J,8BAAU,EAAEjO,CAAC,CAACiO;AAFsC,mBAAL;AAA/B,kBAAdD;AAIN,qBAAKpQ,OAAL,CAAa7B,OAAb,CAAqBsC,KAArB,GAA6B,sBAA7B;AANJ6P;AAAA,uBAOU,KAAKnR,WAAL,CAAiB,8BAAjB,EAAiD;AAACsH,oBAAE,EAAEnB;AAAL,iBAAjD,EAA2D8K,WAA3D,CAPV;;AAAA;AASI,qBAAK1R,YAAL,CAAkB6R,eAAlB,GAAoC,KAAKlR,oBAAL,CAA0B0E,GAA1B,CAA8B,aAAC;AAAA,yBAAI3B,CAAC,CAAC6E,IAAN;AAA/B,kBAApC;AAEA,qBAAKN,iBAAL;;AAXJ;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;AAcA;AACJ;AACA;AACA;;;;WACI,qCAA4B6J,cAA5B,EAA4CtS,aAA5C,EAA2D;AAEvD,UAAM0O,UAAU,GAAG,KAAKC,sBAAL,CAA4B/N,EAAE,CAACwB,OAAHxB,CAAW2R,qCAAvC,CAAnB;AACA,UAAM5M,KAAK,GAAG,KAAKkJ,6BAAL,CAAmCyD,cAAnC,CAAd;AACA,UAAMxD,UAAU,GAAG,KAAKH,sBAAL,CAA4B3O,aAAa,GAAGA,aAAH,GAAmB,EAA5D,CAAnB;AAEA,WAAK8B,OAAL,CAAahC,uBAAb,CAAqCsF,WAArC,CAAiDsJ,UAAjD;AACA,WAAK5M,OAAL,CAAahC,uBAAb,CAAqCsF,WAArC,CAAiDO,KAAjD;AACA,WAAK7D,OAAL,CAAahC,uBAAb,CAAqCsF,WAArC,CAAiD0J,UAAjD;AACH;;;WAED,uCAA8BnJ,KAA9B,EAAqC;AACjC,UAAM6M,YAAY,GAAG7Q,QAAQ,CAACyN,aAATzN,CAAuB,MAAvBA,CAArB;AAEA,UAAM8Q,KAAK,GAAG9Q,QAAQ,CAACyN,aAATzN,CAAuB,MAAvBA,CAAd;AACA,UAAM+Q,UAAU,GAAGC,gBAAgB,CAAC,KAAK7Q,OAAL,CAAa/B,8BAAd,CAAhB4S,CAA8DC,eAAjF;AACAH,WAAK,CAAC/P,YAAN+P,CAAmB,OAAnBA,mBAAsCC,UAAtC;AACAD,WAAK,CAACtQ,SAANsQ,GAAkB,GAAlBA;AAEA,UAAMI,SAAS,GAAGlR,QAAQ,CAACyN,aAATzN,CAAuB,MAAvBA,CAAlB;AACAkR,eAAS,CAAC9N,SAAV8N,CAAoBxM,GAApBwM,CAAwB,4BAAxBA;AACAA,eAAS,CAACnQ,YAAVmQ,CAAuB,OAAvBA,+BAAsDlN,KAAtD,uBAAwEA,KAAxE;AACAkN,eAAS,CAAC1Q,SAAV0Q,GAAsB,KAAtBA;AAEAL,kBAAY,CAACpM,MAAboM,CAAoBC,KAAK,CAACtN,SAANsN,CAAgB,IAAhBA,CAApBD;AACAA,kBAAY,CAACpM,MAAboM,CAAoBK,SAApBL;AACAA,kBAAY,CAACpM,MAAboM,CAAoBC,KAApBD;AACA,aAAOA,YAAP;AACH;;;WAED,gCAAuBnG,IAAvB,EAA6ByG,MAA7B,EAAqC;AACjC,UAAMC,KAAK,GAAG1G,IAAI,GAAGA,IAAH,GAAU,EAA5B;AACA,UAAM2G,WAAW,GAAGrR,QAAQ,CAACyN,aAATzN,CAAuB,MAAvBA,CAApB;AACAqR,iBAAW,CAACvH,SAAZuH,GAAwBD,KAAxBC;;AACA,UAAIF,MAAJ,EAAY;AACRE,mBAAW,CAACtQ,YAAZsQ,CAAyB,OAAzBA,EAAkC,sBAAlCA;AACH;;AAED,aAAOA,WAAP;AACH;;;;;;AAGLpS,EAAE,CAACqS,SAAHrS,CAAa,6BAAbA;AACAA,EAAE,CAACsS,MAAHtS,CAAUpD,oBAAVoD,CAA+BuS,KAA/BvS,GAAuCpD,oBAAvCoD,C","sources":["webpack://basket.upselling_b2bcabinet_template/./index.js"],"sourcesContent":["'use strict'\n\nclass MultibasketComponent {\n\n    componentWraperId = 'sotbit_multibasket_components';\n    dataEntity = {\n        multibasketCurrent: 'multibasket__current',\n        currentName: \"current_name\",\n        currentColor: 'current_color',\n        currentQuantity: 'current_quantity',\n        currentArrow: 'current_arrow',\n        basketsList: 'baskets_list',\n        basketItem: 'basket_item',\n        basketAdd: 'basket_add',\n        otherColor: 'other_color',\n        otherRemove: 'other_remove',\n        otherEdit: 'other_edit',\n        otherBasketWraper: 'otherbasket_wraper',\n        showOtherBusket: 'show_other_busket',\n        modalWindow: 'modal-window',\n        modalTitle :\"modal__title\",\n        modalButtonOk: 'modal-button-ok',\n        modalButtonClose: 'modal-button-close',\n        modalButtonCloseTop: 'modal-button-close-top',\n        modalColorItemChecbox: 'color-item-checbox',\n        modalColorsItems: 'colors-items',\n        colorItemSelected: 'color-item-selected',\n        otherName: 'other_name',\n        basketTotalPrice: 'basket-total-price',\n        productsHeader: 'products-header',\n        productItem: 'product-item',\n        productItemsList: 'product-items-list',\n        poroductPhoto: 'poroduct_photo',\n        productName :'product-name',\n        productPrice: 'product-price',\n        productTotalPrice: 'product-total-price',\n        btnToOrderPage: 'btn-to-order-page',\n        btnDeleteProduct: 'btn-delete-product',\n        btnShowList: 'btn_show_list',\n        multibasketNotification: 'multibasket__notification',\n        multibasketNotificationWrapper: 'multibasket__notification_wrapper',\n        newBasketName: 'new_basket_name',\n        toolTip: 'tool-tip',\n    };\n\n    /**\n     * @type {string | null}\n     */\n    curentSeletedColor = null;\n\n    notification = {};\n\n    /**\n     * @type {number | null}\n     */\n    selectedBasketId = null;\n\n    /**\n     * @type {HTMLElement} root\n     */\n    root;\n    /**\n     * @type {Object} domNods\n     * @type {HTMLElement} domNods.*\n     */\n    domNods;\n\n    /**\n     * @param {object} param\n     * @param {{\n     *  BASKETS: { ID: number, COLOR: string, CURRENT_BASKET: boolean, MAIN: boolean, NAME: string }[],\n     *  BASKET_CHANGE_NOTIFICATIONS: {\n     *  orderBasketColor: string,\n     *  changeColor: {fromColor: string, toColor: string}[],\n     *  united: {fromColor: string, toColor: string},\n     * },\n     *  CURRENT_BASKET: {\n     *      ITEMS_QUANTITY: number,\n     *      TOTAL_PRICE: number,\n     *      CURRENCY: string,\n     *      TOTAL_WEIGHT: number,\n     *      ITEMS: {\n     *          ID: number,\n     *          BASKET_ID: number,\n     *          PRODUCT_ID: number,\n     *          NAME: string,\n     *          DETAIL_PAGE_URL: string,\n     *          PRICE: number,\n     *          BASE_PRICE: number,\n     *          FINAL_PRICE: number,\n     *          DISCOUNT_PRICE: number,\n     *          CURRENCY: string,\n     *          MEASURE_NAME: string,\n     *          WEIGHT: number,\n     *          QUANTITY: number,\n     *          PICTURE: string,\n     *          PROPS: {\n     *              ID: number,\n     *              NAME: string,\n     *              VALUE: string,\n     *          }[]\n     *      }[],\n     * }}} param.result\n     * @param {{\n     *  BASKET_PAGE_URL: string,\n     *  ONLY_BASKET_PAGE_RECALCULATE: 'Y' | 'N',\n     *  RECALCULATE_BASKET: 'EVENT' | 'PAGE_RELOAD',\n     *  PATH_TO_ORDER: string,\n     *  SHOW_NUM_PRODUCTS: 'Y' | 'N',\n     *  SHOW_TOTAL_PRICE: 'Y' | 'N',\n     *  SHOW_PERSONAL_LINK: 'Y' | 'N',\n     *  PATH_TO_PERSONAL: string,\n     *  SHOW_AUTHOR: 'Y' | 'N',\n     *  PATH_TO_AUTHORIZE: string,\n     *  SHOW_REGISTRATION: 'Y' | 'N',\n     *  PATH_TO_REGISTER: string,\n     *  PATH_TO_PROFILE: string,\n     *  SHOW_PRODUCTS: 'Y' | 'N',\n     *  POSITION_FIXED: 'Y' | 'N',\n     *  HIDE_ON_BASKET_PAGES: 'Y' | 'N',\n     *  SHOW_NOTAVAIL: 'Y' | 'N',\n     *  SHOW_IMAGE: 'Y' | 'N',\n     *  SHOW_PRICE: 'Y' | 'N',\n     *  SHOW_SUMMARY: 'Y' | 'N',\n     *  MAX_IMAGE_SIZE: number,\n     * }} param.params\n     */\n\n    constructor({result, params}) {\n\n        this.params = params;\n\n        this.toolTipTimer = null;\n\n        if (this.basketNeedsHidden()) {\n            return;\n        }\n\n        this.baskets = result.BASKETS;\n        this.currentBasket = result.CURRENT_BASKET;\n        this.notification = result.BASKET_CHANGE_NOTIFICATIONS;\n\n        this.getDomElements();\n        this.installEventHandlers();\n\n        BX.addCustomEvent(\n            window,\n            'OnBasketChange',\n            async () => await this.sendRequest('GET', {}),\n        );\n\n        this.additionsBasketListRoot = null;\n        this.basketSelectedAitems = [];\n    }\n\n    /**\n     * @param {HTMLElement} root\n     */\n    setAdditionsBasketListRoot(root) {\n        this.additionsBasketListRoot = root\n    }\n\n    /**\n     * @param {Array} ids\n     */\n    setSelectedProductsInBasket(ids) {\n        this.basketSelectedAitems = ids\n    }\n\n    /**\n     * @param {HTMLElement} parent\n     * @param {string} entity\n     * @returns {HTMLElement}\n     */\n\n    getEntity(parent, entity, all=false) {\n        if (!parent || !entity) {\n            return null;\n        }\n        if (all) {\n            return parent.querySelectorAll('[data-entity=\"' + entity + '\"]');\n        }\n        return parent.querySelector('[data-entity=\"' + entity + '\"]');\n    }\n\n    getDomElements() {\n        this.root = document.getElementById(this.componentWraperId);\n\n        this.domNods = {\n            multibasketCurrent : this.getEntity(this.root, this.dataEntity.multibasketCurrent),\n            currentColor: this.getEntity(this.root, this.dataEntity.currentColor, true),\n            currentName: this.getEntity(this.root, this.dataEntity.currentName),\n            currentArrow: this.getEntity(this.root, this.dataEntity.currentArrow),\n            otherBasketWraper: this.getEntity(this.root, this.dataEntity.otherBasketWraper),\n            currentArrow: this.getEntity(this.root, this.dataEntity.currentArrow),\n            multibasketNotification: this.getEntity(this.root, this.dataEntity.multibasketNotification),\n            toolTip: this.getEntity(this.root, this.dataEntity.toolTip),\n        }\n\n        this.domNods.multibasketNotificationWrapper = this.getEntity(this.root, this.dataEntity.multibasketNotificationWrapper);\n\n        if (!this.domNods.multibasketNotificationWrapper) {\n            this.domNods.multibasketNotificationWrapper = this.domNods.multibasketNotification;\n        }\n\n        if (this.params.POSITION_FIXED === 'Y' && this.params.SHOW_PRODUCTS === 'Y') {\n            this.domNods.btnShowList = this.getEntity(this.root, this.dataEntity.btnShowList);\n            this.domNods.btnShowList.innerText = BX.message.SOTBIT_BULTIBASKET_CLOSE_FIXET_LIST;\n        }\n\n        if (this.params.SHOW_PRODUCTS === 'Y') {\n            this.domNods.productsHeader = this.getEntity(this.root, this.dataEntity.productsHeader);\n            this.domNods.productItem = this.getEntity(this.root, this.dataEntity.productItem);\n            this.domNods.productItemsList = this.getEntity(this.root, this.dataEntity.productItemsList);\n            this.domNods.btnToOrderPage = this.getEntity(this.root, this.dataEntity.btnToOrderPage);\n        }\n\n        if (this.params.SHOW_NUM_PRODUCTS === 'Y' && !this.basketNeedsHidden()) {\n            this.domNods.currentQuantity = this.getEntity(this.root, this.dataEntity.currentQuantity);\n            this.domNods.currentQuantity.style = 'display: block;'\n        }\n\n        if (this.params.SHOW_TOTAL_PRICE === 'Y') {\n            this.domNods.basketTotalPrice = this.getEntity(this.root, this.dataEntity.basketTotalPrice);\n        }\n\n        this.domNods.basketsList = this.getEntity(this.domNods.otherBasketWraper, this.dataEntity.basketsList);\n        this.domNods.basketItem = this.getEntity(this.domNods.basketsList, this.dataEntity.basketItem);\n        this.domNods.basketAdd = this.getEntity(this.domNods.otherBasketWraper, this.dataEntity.basketAdd);\n        this.domNods.modalWindow = this.getEntity(this.root, this.dataEntity.modalWindow);\n        this.domNods.modalName = this.getEntity(this.domNods.modalWindow, this.dataEntity.modalName);\n        this.domNods.modalButtonOk = this.getEntity(this.domNods.modalWindow, this.dataEntity.modalButtonOk);\n        this.domNods.modalButtonClose = this.getEntity(this.domNods.modalWindow, this.dataEntity.modalButtonClose);\n        this.domNods.modalButtonCloseTop = this.getEntity(this.domNods.modalWindow, this.dataEntity.modalButtonCloseTop);\n        this.domNods.modalColorItemChecbox = this.getEntity(this.domNods.modalWindow, this.dataEntity.modalColorItemChecbox);\n        this.domNods.modalColorsItems = this.getEntity(this.domNods.modalWindow, this.dataEntity.modalColorsItems);\n        this.domNods.colorItemSelected = this.getEntity(this.domNods.modalWindow, this.dataEntity.colorItemSelected);\n        this.domNods.newBasketName = this.getEntity(this.domNods.modalWindow, this.dataEntity.newBasketName);\n        this.domNods.newBasketName.setAttribute('maxlength', 20);\n\n    }\n\n    installEventHandlers() {\n        this.domNods.currentArrow.addEventListener('click', e => {\n            e.preventDefault();\n            this.showOtherBasketEvent(e);\n        });\n        this.domNods.multibasketCurrent.addEventListener('mouseover', this.showOtherBasketEvent.bind(this));\n        this.domNods.multibasketCurrent.addEventListener('mouseout', this.showOtherBasketEvent.bind(this));\n        this.domNods.otherBasketWraper.addEventListener('mouseover', this.showOtherBasketEvent.bind(this));\n        this.domNods.otherBasketWraper.addEventListener('mouseout', this.showOtherBasketEvent.bind(this));\n        this.domNods.basketAdd.addEventListener('click', this.showModalButtonEvent.bind(this));\n        this.domNods.basketAdd.addEventListener('mouseover', this.hideBasketToolTip.bind(this));\n        this.domNods.modalButtonClose.addEventListener('click', this.modalButtonCloseEvent.bind(this));\n        this.domNods.modalButtonCloseTop.addEventListener('click', this.modalButtonCloseEvent.bind(this));\n        this.domNods.modalWindow.addEventListener('click', this.modalButtonCloseFonEvent.bind(this));\n        this.domNods.modalButtonOk.addEventListener('click', this.modalButtonOkEvent.bind(this));\n        this.domNods.multibasketNotificationWrapper.addEventListener('click', this.closeNotifications.bind(this));\n\n        if (this.domNods.btnShowList !== undefined) {\n            this.domNods.btnShowList.addEventListener('click', () => {\n                const conditions = this.domNods.productItemsList.style.display === 'none';\n                if (conditions) {\n                    this.domNods.btnShowList.innerText = BX.message.SOTBIT_BULTIBASKET_CLOSE_FIXET_LIST;\n                    this.domNods.productItemsList.style = 'display: block;';\n                    if (this.domNods.productsHeader !== undefined && this.currentBasket.ITEMS_QUANTITY > 0) {\n                        this.domNods.productsHeader.style = 'display: block;';\n                    }\n                } else {\n                    this.domNods.btnShowList.innerText = BX.message.SOTBIT_BULTIBASKET_SHOW_FIXET_LIST;\n                    this.domNods.productItemsList.style = 'display: none;';\n                    if (this.domNods.productsHeader !== undefined) {\n                        this.domNods.productsHeader.style = 'display: none;';\n                    }\n                }\n            })\n        }\n\n        Array.prototype.slice.call(this.domNods.modalColorsItems.childNodes).forEach(i => {\n            if (i instanceof HTMLDivElement) {\n                i.addEventListener('click', this.colorChekBoxEvent.bind(this));\n            }\n        });\n    }\n\n    render() {\n\n        if (this.basketNeedsHidden()) {\n            return;\n        }\n\n        this.renderProducts();\n        this.renderTotalPrice();\n        this.renderBaskets();\n        this.renderAdditionsBasketList();\n\n        if (this.params.POSITION_FIXED === 'Y') {\n            this.setBasketListPosition();\n            this.setFixedBasketHeight();\n            this.calculateTopMarginByFixedBasket();\n        }\n\n        this.basketChangeNotifications();\n    }\n\n    colorChekBoxEvent(e) {\n\n        const classActivColor = 'modal__active';\n\n        if (e.currentTarget.classList.contains(classActivColor)) {\n\n            this.removeColorCheckBoxMarker();\n            const newMarker = this.domNods.modalColorItemChecbox.cloneNode(true);\n            newMarker.style = 'display: flex;';\n            e.currentTarget.appendChild(newMarker);\n            this.curentSeletedColor = e.currentTarget.getAttribute('style').slice(-7, -1);\n        }\n    }\n\n    removeColorCheckBoxMarker() {\n        Array.prototype.slice.call(this.domNods.modalColorsItems.childNodes).forEach(i => {\n            if (i instanceof HTMLDivElement) {\n                const marker = this.getEntity(i, this.dataEntity.modalColorItemChecbox);\n                if (marker instanceof HTMLDivElement) {\n                    marker.remove();\n                }\n            }\n        });\n    }\n\n    /**\n     * @param {'set' | 'unset'} action\n     * @param {string} color\n    */\n    setColorCheckBoxSelectedMarker(action, color) {\n        const basketColors = this.baskets.map(i => i.COLOR);\n        const activClass = 'modal__active';\n        const selectedItemSign = this.domNods.colorItemSelected;\n        this.curentSeletedColor = color;\n        Array.prototype.slice.call(this.domNods.modalColorsItems.childNodes).forEach(i => {\n            if (i instanceof HTMLDivElement && action === 'set') {\n                if (i.getAttribute('style').slice(-7, -1) === color) {\n                    const newMarker = this.domNods.modalColorItemChecbox.cloneNode(true);\n                    newMarker.style = 'display: flex;';\n                    i.appendChild(newMarker);\n                    return\n                }\n                if (basketColors.includes(i.getAttribute('style').slice(-7, -1))) {\n                    i.classList.remove(activClass)\n                    const node = selectedItemSign.cloneNode(true);\n                    node.style = 'display: block;'\n                    i.append(node)\n                }\n            } else if (i instanceof HTMLDivElement && action === 'unset') {\n                if (!i.classList.contains(activClass)) {\n                    i.classList.add(activClass)\n                    Array.prototype.slice.call(i.childNodes).forEach(i => i.remove())\n                }\n            }\n        })\n    }\n\n    showOtherBasketEvent(e) {\n        const arrowRotateClass = 'multibasket__current-arrow__show';\n        const visibleClass = 'otherbasket_wraper_active';\n\n        if (e.type === 'mouseover') {\n            this.domNods.currentArrow.classList.add(arrowRotateClass);\n            this.domNods.otherBasketWraper.classList.add(visibleClass);\n        } else if (e.type === 'mouseout') {\n            this.domNods.otherBasketWraper.classList.remove(visibleClass);\n            this.domNods.currentArrow.classList.remove(arrowRotateClass);\n        }\n    }\n\n    recalculateBasket() {\n        const basketPage = this.getCurrentPage();\n        const isBasketPage = basketPage === this.params.BASKET_PAGE_URL\n            || basketPage === this.params.BASKET_PAGE_URL + 'index.php';\n\n        if (this.params.ONLY_BASKET_PAGE_RECALCULATE === 'Y') {\n            if (!isBasketPage) {\n                return;\n            }\n        }\n\n        if (this.params.RECALCULATE_BASKET !== 'EVENT') {\n            window.location.reload();\n        }\n\n        BX.onCustomEvent(window, 'sotbitMultibasketSwitch', this.baskets);\n    }\n\n    getCurrentPage() {\n        return window.location.pathname;\n    }\n\n    /**\n     * @param {string} color\n     * @param {number} id\n     */\n\n    showModalButtonEvent(_, color, id, name) {\n        this.selectedBasketId = id;\n        const visibleClass = 'multibasket__modal__active';\n        this.setColorCheckBoxSelectedMarker('set', color);\n\n        this.domNods.newBasketName.value = name ? name : BX.message.SOTBIT_BULTIBASKET_NEW_BASKET;\n\n        const checkedNum = this.getEntity(this.domNods.modalWindow, this.dataEntity.colorItemSelected, true).length;\n        const allColors = Array.prototype.slice.call(this.domNods.modalColorsItems.childNodes)\n            .filter(i => i instanceof HTMLDivElement).length;\n        console.log(checkedNum, allColors + 1)\n        if (checkedNum === allColors + 1) {\n            this.domNods.modalWindow.querySelector('.modal__title')\n                .innerText = BX.message.SOTBIT_BULTIBASKET_REMOVE_NOT_USE_BASKET;\n            this.domNods.newBasketName.setAttribute('disabled', true)\n        } else if (id) {\n            this.domNods.modalWindow.querySelector('.modal__title')\n                .innerText = BX.message.SOTBIT_BULTIBASKET_UPDATE_BASKET;\n            this.domNods.newBasketName.removeAttribute('disabled')\n        } else {\n            this.domNods.modalWindow.querySelector('.modal__title')\n                .innerText = BX.message.SOTBIT_BULTIBASKET_CREATE_NEW_BASKET;\n            this.domNods.newBasketName.removeAttribute('disabled')\n        }\n\n        const title = this.getEntity(this.domNods.modalWindow, this.dataEntity.modalTitle);\n\n        this.domNods.modalWindow.classList.add(visibleClass);\n    }\n\n    modalButtonCloseEvent() {\n        const visibleClass = 'multibasket__modal__active';\n        this.domNods.modalWindow.classList.remove(visibleClass);\n        this.removeColorCheckBoxMarker();\n        this.setColorCheckBoxSelectedMarker('unset');\n    }\n\n    modalButtonCloseFonEvent(e) {\n        if (!e.target.querySelector('.multibasket__edit-form')) {\n            return;\n        }\n        const visibleClass = 'multibasket__modal__active';\n        this.domNods.modalWindow.classList.remove(visibleClass);\n        this.removeColorCheckBoxMarker();\n        this.setColorCheckBoxSelectedMarker('unset');\n    }\n\n    /**\n     * @param {number} id\n     */\n    async removeBasketEvent(id) {\n        await this.sendRequest('DELETE', {ID: id});\n    }\n\n    /**\n     * @param {number} id\n     */\n    async setCurrentBasketEvent(id) {\n        await this.sendRequest('UPDATE', {ID: id, CURRENT_BASKET: true});\n        this.recalculateBasket();\n    }\n\n    async modalButtonOkEvent() {\n\n        if (!this.curentSeletedColor) {\n            return alert(BX.message.SOTBIT_BULTIBASKET_YOU_NEED_TO_CHOOSE_A_COLOR_FIRST);\n        }\n\n        if (this.domNods.newBasketName.value.trim() === '') {\n            return alert(BX.message.SOTBIT_BULTIBASKET_YOU_NEED_TO_CHOOSE_A_NAME_FIRST)\n        }\n\n        const action = this.selectedBasketId ? 'UPDATE' : 'CREATE';\n\n        await this.sendRequest(action, {\n            ID: this.selectedBasketId,\n            COLOR: this.curentSeletedColor,\n            NAME: encodeURI(this.domNods.newBasketName.value),\n        });\n\n        if (action === 'CREATE') {\n            const newBasketId = (() => {\n                for (let i in this.baskets) {\n                    if (this.baskets[i].COLOR === this.curentSeletedColor) {\n                        return this.baskets[i].ID\n                    }\n                }\n            })()\n            this.createNewBasketNotification(this.curentSeletedColor, `\"${this.domNods.newBasketName.value}\"`);\n            await this.setCurrentBasketEvent(newBasketId);\n        }\n\n        const visibleClass = 'multibasket__modal__active';\n        this.domNods.modalWindow.classList.remove(visibleClass);\n        this.selectedBasketId = null\n        this.curentSeletedColor = null;\n        this.removeColorCheckBoxMarker();\n        this.setColorCheckBoxSelectedMarker('unset');\n    }\n\n\n\n    /**\n     * @param {Object} params\n     * @param {number | null} params.ID\n     * @param {string | null} params.NAME\n     * @param {string | null} params.COLOR\n     * @param {boolean | null} params.CURRENT_BASKET\n     * @param {'GET' | 'CREATE' | 'UPDATE' | 'DELETE' | 'MOVE_ITEMS_TO_ANOTHER_BASKET'} Action\n     */\n    async sendRequest(Action, params, additionalParams) {\n        try {\n            BX.showWait();\n            const result = await BX.ajax.runAction('sotbit:multibasket.MultibasketController.any', {\n                data: {\n                    action: Action,\n                    requestData: JSON.stringify(params),\n                    viewParam: JSON.stringify({\n                        'SHOW_TOTAL_PRICE': this.params.SHOW_TOTAL_PRICE === 'Y' ? true : false,\n                        'SHOW_SUMMARY': this.params.SHOW_SUMMARY === 'Y' ? true : false,\n                        'SHOW_IMAGE': this.params.SHOW_IMAGE === 'Y' ? true : false,\n                        'SHOW_PRICE': this.params.SHOW_PRICE === 'Y' ? true : false,\n                        'SHOW_PRODUCTS': this.params.SHOW_PRODUCTS === 'Y' ? true : false,\n                    }),\n                    addionalsParams: JSON.stringify(additionalParams),\n                },\n            });\n\n            this.baskets = result.data.BASKETS ?? this.baskets;\n            this.currentBasket = result.data.CURRENT_BASKET ?? this.currentBasket;\n            this.notification = result.data.BASKET_CHANGE_NOTIFICATIONS\n                ? result.data.BASKET_CHANGE_NOTIFICATIONS\n                : {} ;\n\n            this.render();\n            BX.closeWait();\n        } catch (error) {\n            console.log(error)\n        }\n    }\n\n    /**\n     * @param {number} basketItemId\n     * @param {'GET' | 'CREATE' | 'UPDATE' | 'DELETE'} Action\n     */\n        async sendBasketItemRequest(Action, basketItemId) {\n        try {\n            BX.showWait();\n            const result = await BX.ajax.runAction('sotbit:multibasket.BasketItemController.any', {\n                data: {\n                    action: Action,\n                    basketItemId: basketItemId,\n                },\n            });\n\n            if (result.status === 'success') {\n                BX.onCustomEvent(window,  'OnBasketChange', []);\n            }\n\n            BX.closeWait();\n        } catch (error) {\n            console.log(error)\n        }\n    }\n\n    setBasketListPosition() {\n        if (this.params.POSITION_FIXED === 'Y') {\n            this.domNods.otherBasketWraper.style = 'position: relative;';\n        }\n    }\n\n    setFixedBasketHeight() {\n        if (this.params.SHOW_PRODUCTS === 'Y') {\n            const classH = 'multibasket__products_height';\n            this.domNods.productItemsList.classList.remove(classH);\n            const scrinHeight = document.documentElement.clientHeight;\n            const basketHeight = this.domNods.productItemsList.clientHeight;\n            if (basketHeight > 0.65 * scrinHeight) {\n                this.domNods.productItemsList.classList.add(classH);\n            } else {\n                this.domNods.productItemsList.classList.remove(classH);\n            }\n        }\n    }\n\n    /**@returns {boolean} */\n    basketNeedsHidden() {\n\n        if (this.params.HIDE_ON_BASKET_PAGES === 'Y') {\n            const currentPage = this.getCurrentPage();\n            if (currentPage === this.params.BASKET_PAGE_URL || currentPage === this.params.PATH_TO_ORDER) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    renderProducts() {\n        if (this.domNods.productItem !== undefined && this.domNods.productItemsList !== undefined) {\n            Array.prototype.slice.call(this.domNods.productItemsList.childNodes).forEach(i => i.remove())\n\n            this.currentBasket.ITEMS.forEach(i => {\n                const item = this.domNods.productItem.cloneNode(true);\n\n                if (this.params.SHOW_IMAGE === 'Y') {\n                    const photo = this.getEntity(item, this.dataEntity.poroductPhoto);\n                    photo.src = i.PICTURE;\n                }\n\n                const productName = this.getEntity(item, this.dataEntity.productName);\n                productName.href = i.DETAIL_PAGE_URL;\n                productName.innerHTML = i.NAME;\n\n                if (this.params.SHOW_PRICE === 'Y') {\n                    const productPrice = this.getEntity(item, this.dataEntity.productPrice);\n                    const price = `<strong>${i.PRICE}</strong>`;\n                    const priceCurency = `<strong>${i.CURRENCY} </strong>`;\n                    const basePrice = `<span>${i.BASE_PRICE}</span>`;\n                    const basePriceCurency = `<span>${i.CURRENCY}</span>`;\n                    productPrice.innerHTML = price + priceCurency + basePrice + basePriceCurency;\n                }\n\n                if (this.params.SHOW_SUMMARY === 'Y') {\n                    const productTotalPrice = this.getEntity(item, this.dataEntity.productTotalPrice);\n                    const quantity = `<strong>${i.QUANTITY} </strong>`;\n                    const measure = `<span>${i.MEASURE_NAME} </span>`;\n                    const text = `<span>${BX.message.SOTBIT_BULTIBASKET_TOTAL_PRICE} </span>`;\n                    const finalPrice = `<strong>${i.FINAL_PRICE}</strong>`;\n                    const currency = `<strong>${i.CURRENCY} </strong>`;\n                    productTotalPrice.innerHTML = quantity + measure + text + finalPrice + currency;\n                }\n\n                const btnDeleteProduct = this.getEntity(item, this.dataEntity.btnDeleteProduct);\n                btnDeleteProduct.addEventListener('click', () => this.sendBasketItemRequest('DELETE', i.BASKET_ID));\n\n\n                this.domNods.productItemsList.appendChild(item);\n            })\n        }\n\n        if (this.domNods.productsHeader !== undefined && this.domNods.productItemsList !== undefined) {\n            if (this.currentBasket.ITEMS_QUANTITY > 0) {\n                this.domNods.productItemsList.style = 'display: block;';\n                this.domNods.productsHeader.style = 'display: block;';\n                this.domNods.btnToOrderPage.style = 'display: block;';\n            } else {\n                this.domNods.productsHeader.style = 'display: none;';\n                this.domNods.productItemsList.style = 'display: none;';\n                this.domNods.btnToOrderPage.style = 'display: none;';\n            }\n        }\n    }\n\n    renderTotalPrice() {\n        if (this.domNods.basketTotalPrice !== undefined) {\n\n            if (this.currentBasket.ITEMS_QUANTITY > 0) {\n                this.domNods.basketTotalPrice.style = 'display: block;';\n                const childText = `<span>${BX.message.SOTBIT_BULTIBASKET_TOTAL_PRICE} </span>`;\n                const childTotalPrice = `<strong>${Number(this.currentBasket.TOTAL_PRICE).toFixed(2)}</strong>`;\n                const childTotalCurrency = `<strong>${this.currentBasket.CURRENCY}</strong>`;\n                this.domNods.basketTotalPrice.innerHTML = childText + childTotalPrice + childTotalCurrency;\n            } else {\n                this.domNods.basketTotalPrice.style = 'display: none;'\n            }\n        }\n    }\n\n    renderBaskets() {\n\n        const currentBasket = this.baskets.filter(i => i.CURRENT_BASKET)[0];\n        Array.prototype.slice.call(this.domNods.currentColor).forEach(i => i.style = `background-color: #${currentBasket.COLOR};`);\n        this.domNods.currentName.innerText = currentBasket.MAIN\n            ? (currentBasket.NAME ? currentBasket.NAME : BX.message.SOTBIT_BULTIBASKET_MAIN_BASKET)\n            : (currentBasket.NAME ? currentBasket.NAME : BX.message.SOTBIT_BULTIBASKET_OHER_BASKET);\n\n        if (this.domNods.currentQuantity !== undefined) {\n            this.domNods.currentQuantity.innerText = this.currentBasket.ITEMS_QUANTITY;\n        }\n\n        const otherBasketDomElements = this.getBaksetList();\n        Array.prototype.slice.call(this.domNods.basketsList.childNodes,).forEach(i => i.remove());\n        otherBasketDomElements.forEach(i => this.domNods.basketsList.appendChild(i))\n            Array.prototype.slice.call(this.domNods.modalColorsItems.childNodes).forEach(i => {\n                if (i instanceof HTMLDivElement) {\n                    i.addEventListener('click', this.colorChekBoxEvent.bind(this));\n                }\n        });\n    }\n\n    renderAdditionsBasketList() {\n\n        if (!this.additionsBasketListRoot) {\n            return;\n        }\n\n        const otherBasketDomElements = this.getAdditonalBasketList(this.moveItemsToBusket.bind(this));\n        Array.prototype.slice.call(this.additionsBasketListRoot.childNodes).forEach(i => i.remove());\n        otherBasketDomElements.forEach(i => this.additionsBasketListRoot.appendChild(i));\n\n    }\n\n    /**\n     * @returns {Array<HTMLElement>}\n     */\n    getBaksetList() {\n        const otherBasket = this.baskets.filter(i => !Boolean(i.CURRENT_BASKET));\n        const otherBasketDomElements = otherBasket.map(i => {\n            const node = this.domNods.basketItem.cloneNode(true);\n            node.addEventListener('click', e => {\n                if (this.dataEntity.basketItem === e.currentTarget.dataset['entity']) {\n                    this.setCurrentBasketEvent(i.ID);\n                }\n            })\n            this.getEntity(node, this.dataEntity.otherColor).style = `background-color: #${i.COLOR};`\n            this.getEntity(node, this.dataEntity.otherName).innerText = i.MAIN\n                ? (i.NAME ? i.NAME : BX.message.SOTBIT_BULTIBASKET_MAIN_BASKET)\n                : (i.NAME ? i.NAME : BX.message.SOTBIT_BULTIBASKET_OHER_BASKET);\n\n\n            if (i.MAIN) {\n                this.getEntity(node, this.dataEntity.otherRemove).remove();\n                this.getEntity(node, this.dataEntity.otherEdit).remove();\n            } else {\n                this.getEntity(node, this.dataEntity.otherRemove)\n                    .addEventListener('click', (e => {\n                        e.stopPropagation();\n                        this.removeBasketEvent(i.ID);\n                    }).bind(this));\n\n                this.getEntity(node, this.dataEntity.otherEdit).addEventListener('click', e => {\n                    e.stopPropagation();\n                    this.showModalButtonEvent(e, i.COLOR, i.ID, i.NAME);\n                });\n            }\n\n            node.addEventListener('mouseover', this.showBasketToolTip.bind(this));\n            node.addEventListener('mouseout', this.hideBasketToolTip.bind(this));\n\n            return node\n        });\n\n        return otherBasketDomElements;\n    }\n\n    /**\n     * @returns {Array<HTMLElement>}\n     */\n    getAdditonalBasketList() {\n        const otherBasket = this.baskets.filter(i => !Boolean(i.CURRENT_BASKET));\n        const otherBasketDomElements = otherBasket.map(i => {\n            const node = this.domNods.basketItem.cloneNode(true);\n            node.addEventListener('click', e => {\n                if (this.dataEntity.basketItem === e.currentTarget.dataset['entity']) {\n                    this.moveItemsToBusket(i.ID);\n                }\n            })\n            this.getEntity(node, this.dataEntity.otherColor).style = `background-color: #${i.COLOR};`\n            this.getEntity(node, this.dataEntity.otherName).innerText = i.MAIN\n                ? (i.NAME ? i.NAME : BX.message.SOTBIT_BULTIBASKET_MAIN_BASKET)\n                : (i.NAME ? i.NAME : BX.message.SOTBIT_BULTIBASKET_OHER_BASKET);\n\n\n            this.getEntity(node, this.dataEntity.otherRemove).remove();\n            this.getEntity(node, this.dataEntity.otherEdit).remove();\n\n            node.addEventListener('mouseover', this.showBasketToolTip.bind(this));\n            node.addEventListener('mouseout', this.hideBasketToolTip.bind(this));\n\n            return node\n        });\n\n        return otherBasketDomElements;\n    }\n\n    calculateTopMarginByFixedBasket() {\n        if (this.params.POSITION_VERTICAL === 'vcenter') {\n            this.root.style = `margin-top: -${Math.round(this.root.offsetHeight / 2)}px`;\n        }\n    }\n\n    basketChangeNotifications() {\n\n        const showClass = 'notification__show';\n\n        if (this.notification.order && this.notification.order.fromColor) {\n\n            const textBefore = this.createNotificationText(BX.message.SOTBIT_BULTIBASKET_ORDER_PROCESSED);\n            const color = this.createNotificationBasketColor(this.notification.order.fromColor);\n            const basketName = this.createNotificationText(`\"${this.notification.order.fromName}\"`, 'white-space: nowrap;');\n            const textAfter = this.createNotificationText(BX.message.SOTBIT_BULTIBASKET_BASKET_REMOVED);\n\n            this.domNods.multibasketNotification.appendChild(textBefore);\n            this.domNods.multibasketNotification.appendChild(color);\n            this.domNods.multibasketNotification.appendChild(basketName);\n            this.domNods.multibasketNotification.appendChild(textAfter);\n        }\n\n        if (this.notification.order && this.notification.order.toColor) {\n\n            const br = document.createElement('br');\n            const textBefore = this.createNotificationText(BX.message.SOTBIT_BULTIBASKET_OHER_BASKET);\n            const color = this.createNotificationBasketColor(this.notification.order.toColor);\n            const textAfter = this.createNotificationText(BX.message.SOTBIT_BULTIBASKET_NEW_MAIN);\n            const basketName = this.createNotificationText(`\"${this.notification.order.toName}\"`, 'white-space: nowrap;');\n\n            this.domNods.multibasketNotification.appendChild(br);\n            this.domNods.multibasketNotification.appendChild(textBefore);\n            this.domNods.multibasketNotification.appendChild(color);\n            this.domNods.multibasketNotification.appendChild(basketName);\n            this.domNods.multibasketNotification.appendChild(textAfter);\n        }\n\n        if(this.notification.united && this.notification.united.fromColor && this.notification.united.toColor) {\n\n            const textBefore = this.createNotificationText(BX.message.SOTBIT_BULTIBASKET_ITEMS_BASKTET_FROM);\n            const color1 = this.createNotificationBasketColor(this.notification.united.fromColor);\n            const basketName1 = this.createNotificationText(`\"${this.notification.united.fromName}\"`, 'white-space: nowrap;');\n            const br = document.createElement('br');\n            const textAfter = thi.createNotificationText(BX.message.SOTBIT_BULTIBASKET_ITEMS_BASKTET_TO);\n            const color2 = this.createNotificationBasketColor(this.notification.united.toColor);\n            const basketName2 = this.createNotificationText(`\"${this.notification.united.toName}\"`, 'white-space: nowrap;');\n\n            this.domNods.multibasketNotification.appendChild(textBefore);\n            this.domNods.multibasketNotification.appendChild(color1);\n            this.domNods.multibasketNotification.appendChild(basketName1);\n            this.domNods.multibasketNotification.appendChild(br.cloneNode(true));\n            this.domNods.multibasketNotification.appendChild(textAfter);\n            this.domNods.multibasketNotification.appendChild(color2);\n            this.domNods.multibasketNotification.appendChild(basketName2);\n            this.domNods.multibasketNotification.appendChild(br);\n        }\n\n        if (this.notification.changeColor && this.notification.changeColor.length > 0) {\n            this.notification.changeColor.forEach(i => {\n\n                const textBefore = this.createNotificationText(BX.message.SOTBIT_BULTIBASKET_BASKET_ADD);\n                const color1 = this.createNotificationBasketColor(this.notification.united.fromColor);\n                const basketName1 = this.createNotificationText(`\"${this.notification.united.fromName}\"`, 'white-space: nowrap;');\n                const textAfter = this.createNotificationText(BX.message.SOTBIT_BULTIBASKET_COLOR_CHANGE);\n                const color2 = this.createNotificationBasketColor(this.notification.united.toColor);\n                const basketName2 = this.createNotificationText(`\"${this.notification.united.toName}\"`, 'white-space: nowrap;');\n                const br = document.createElement('br');\n\n                this.domNods.multibasketNotification.appendChild(textBefore);\n                this.domNods.multibasketNotification.appendChild(color1);\n                this.domNods.multibasketNotification.appendChild(basketName1);\n                this.domNods.multibasketNotification.appendChild(textAfter);\n                this.domNods.multibasketNotification.appendChild(color2);\n                this.domNods.multibasketNotification.appendChild(basketName2);\n                this.domNods.multibasketNotification.appendChild(br);\n            })\n        }\n\n        if (\n            this.notification.moveProductToBasket\n            && this.notification.moveProductToBasket.toBasketColor\n            && Array.isArray(this.notification.moveProductToBasket.productsName)\n        ) {\n\n            const textBefore = this.createNotificationText(BX.message.SOTBIT_BULTIBASKET_ITEMS_NAMES);\n            const product = this.createNotificationText(`${this.notification.moveProductToBasket.productsName[0]} `);\n\n            this.domNods.multibasketNotification.appendChild(textBefore);\n            this.domNods.multibasketNotification.appendChild(product);\n\n            if (this.notification.moveProductToBasket.productsName.length > 1) {\n                const textBefore2 = this.createNotificationText(BX.message.SOTBIT_BULTIBASKET_AND_OTHER);\n                this.domNods.multibasketNotification.appendChild(textBefore2);\n            }\n\n            const br = document.createElement('br');\n            const textBefore1 = this.createNotificationText(BX.message.SOTBIT_BULTIBASKET_ITEMS_MOVE);\n            const color = this.createNotificationBasketColor(this.notification.moveProductToBasket.toBasketColor);\n            const basketName = this.createNotificationText(`\"${this.notification.moveProductToBasket.toBasketName}\"`, 'white-space: nowrap;');\n\n            this.domNods.multibasketNotification.appendChild(br);\n            this.domNods.multibasketNotification.appendChild(textBefore1);\n            this.domNods.multibasketNotification.appendChild(color);\n            this.domNods.multibasketNotification.appendChild(basketName);\n\n        }\n\n        if (this.domNods.multibasketNotification.childNodes.length > 0) {\n            this.renderNotification();\n        }\n    }\n\n    renderNotification() {\n\n        const showClass = 'notification__show';\n\n        this.domNods.multibasketNotificationWrapper.removeAttribute('style');\n\n        this.domNods.multibasketNotificationWrapper.classList.add(showClass);\n        setTimeout(() => {\n            this.domNods.multibasketNotificationWrapper.classList.remove(showClass);\n            setTimeout(() => {\n                this.domNods.multibasketNotificationWrapper.setAttribute('style', 'display: none;');\n                Array.prototype.slice\n                    .call(this.domNods.multibasketNotification.childNodes)\n                    .forEach(i => i.remove());\n            }, 1000)\n        }, 5000)\n    }\n\n    closeNotifications() {\n        const showClass = 'notification__show';\n        this.domNods.multibasketNotificationWrapper.classList.remove(showClass);\n        setTimeout(() => {\n            this.domNods.multibasketNotificationWrapper.setAttribute('style', 'display: none;');\n            Array.prototype.slice\n                .call(this.domNods.multibasketNotification.childNodes)\n                .forEach(i => i.remove());\n        }, 1000);\n    }\n\n    getTextMaxWidth() {\n        return this.root.offsetWidth - 90;\n    }\n\n    showBasketToolTip(e) {\n        clearTimeout(this.toolTipTimer);\n\n        const eCurrentTarget = e.currentTarget;\n        const eClientX = e.clientX;\n        const eClientY = e.clientY;\n\n        this.toolTipTimer = setTimeout(function(eCurrentTarget, eClientX, eClientY) {\n\n            const text = this.getEntity(eCurrentTarget, this.dataEntity.otherName).textContent\n            this.domNods.toolTip.innerText = text;\n            const textMaxWith = this.getTextMaxWidth();\n\n            const condition = !this.domNods.toolTip.getAttribute('style').includes('visible')\n                && textMaxWith <= this.domNods.toolTip.clientWidth;\n\n            if (condition) {\n                const right = window.innerWidth - eClientX + 25;\n                const top = eClientY + 25;\n                this.domNods.toolTip.style = `isibility: visible; right: ${right}px; top: ${top}px;`;\n                setTimeout(() => {\n                    this.domNods.toolTip.style = 'visibility: collapse';\n                }, 7000);\n            } else {\n                this.domNods.toolTip.style = 'visibility: collapse';\n            }\n        }.bind(this, eCurrentTarget, eClientX, eClientY), 500);\n    }\n\n    hideBasketToolTip(e) {\n\n        clearTimeout(this.toolTipTimer);\n        const target = e.target.getAttribute('data-entity');\n        const currentTarget = e.currentTarget.getAttribute('data-entity');\n        if (target !== currentTarget) {\n            return;\n        }\n        this.domNods.toolTip.style = 'visibility: collapse';\n    }\n\n    async moveItemsToBusket(id) {\n\n        const basketItems = this.basketSelectedAitems.map(i => ({\n            ID: i.ID,\n            PRODUCT_ID: i.PRODUCT_ID,\n        }))\n        this.domNods.toolTip.style = 'visibility: collapse';\n        await this.sendRequest('MOVE_ITEMS_TO_ANOTHER_BASKET', {ID: id}, basketItems);\n\n        this.notification.moveBasketItems = this.basketSelectedAitems.map(i => i.NAME);\n\n        this.recalculateBasket();\n    }\n\n    /**\n     * @param {string} color\n     * @param {string} name\n     */\n    createNewBasketNotification(newBasketColor, newBasketName) {\n\n        const textBefore = this.createNotificationText(BX.message.SOTBIT_BULTIBASKET_NEW_BASKET_CREATED);\n        const color = this.createNotificationBasketColor(newBasketColor);\n        const basketName = this.createNotificationText(newBasketName ? newBasketName : '');\n\n        this.domNods.multibasketNotification.appendChild(textBefore);\n        this.domNods.multibasketNotification.appendChild(color);\n        this.domNods.multibasketNotification.appendChild(basketName);\n    }\n\n    createNotificationBasketColor(color) {\n        const colorElement = document.createElement('span');\n\n        const space = document.createElement('span');\n        const spaceColor = getComputedStyle(this.domNods.multibasketNotificationWrapper).backgroundColor;\n        space.setAttribute('style', `color: ${spaceColor}`);\n        space.innerText = '1';\n\n        const rectangle = document.createElement('span');\n        rectangle.classList.add('notification__basket_color')\n        rectangle.setAttribute('style', `background-color: #${color}; color: #${color}; border-radius: 4px;`);\n        rectangle.innerText = '111';\n\n        colorElement.append(space.cloneNode(true));\n        colorElement.append(rectangle);\n        colorElement.append(space);\n        return colorElement\n    }\n\n    createNotificationText(text, styles) {\n        const text1 = text ? text : '';\n        const textElement = document.createElement('span');\n        textElement.innerHTML = text1;\n        if (styles) {\n            textElement.setAttribute('style', 'white-space: nowrap;');\n        }\n\n        return textElement;\n    }\n}\n\nBX.namespace('Sotbit.MultibasketComponent');\nBX.Sotbit.MultibasketComponent.class = MultibasketComponent;"],"names":["MultibasketComponent","result","params","_classCallCheck","_defineProperty","multibasketCurrent","currentName","currentColor","currentQuantity","currentArrow","basketsList","basketItem","basketAdd","otherColor","otherRemove","otherEdit","otherBasketWraper","showOtherBusket","modalWindow","modalTitle","modalButtonOk","modalButtonClose","modalButtonCloseTop","modalColorItemChecbox","modalColorsItems","colorItemSelected","otherName","basketTotalPrice","productsHeader","productItem","productItemsList","poroductPhoto","productName","productPrice","productTotalPrice","btnToOrderPage","btnDeleteProduct","btnShowList","multibasketNotification","multibasketNotificationWrapper","newBasketName","toolTip","toolTipTimer","basketNeedsHidden","baskets","BASKETS","currentBasket","CURRENT_BASKET","notification","BASKET_CHANGE_NOTIFICATIONS","getDomElements","installEventHandlers","BX","addCustomEvent","window","_context","_this","sendRequest","additionsBasketListRoot","basketSelectedAitems","root","ids","parent","entity","all","querySelectorAll","querySelector","document","getElementById","componentWraperId","domNods","getEntity","dataEntity","POSITION_FIXED","SHOW_PRODUCTS","innerText","message","SOTBIT_BULTIBASKET_CLOSE_FIXET_LIST","SHOW_NUM_PRODUCTS","style","SHOW_TOTAL_PRICE","modalName","setAttribute","addEventListener","e","preventDefault","_this2","showOtherBasketEvent","bind","showModalButtonEvent","hideBasketToolTip","modalButtonCloseEvent","modalButtonCloseFonEvent","modalButtonOkEvent","closeNotifications","undefined","conditions","display","ITEMS_QUANTITY","SOTBIT_BULTIBASKET_SHOW_FIXET_LIST","Array","prototype","slice","call","childNodes","forEach","i","HTMLDivElement","colorChekBoxEvent","renderProducts","renderTotalPrice","renderBaskets","renderAdditionsBasketList","setBasketListPosition","setFixedBasketHeight","calculateTopMarginByFixedBasket","basketChangeNotifications","classActivColor","currentTarget","classList","contains","removeColorCheckBoxMarker","newMarker","cloneNode","appendChild","curentSeletedColor","getAttribute","marker","_this3","remove","action","color","basketColors","map","COLOR","activClass","selectedItemSign","_this4","includes","node","append","add","arrowRotateClass","visibleClass","type","basketPage","getCurrentPage","isBasketPage","BASKET_PAGE_URL","ONLY_BASKET_PAGE_RECALCULATE","RECALCULATE_BASKET","location","reload","onCustomEvent","pathname","_","id","name","selectedBasketId","setColorCheckBoxSelectedMarker","value","SOTBIT_BULTIBASKET_NEW_BASKET","checkedNum","length","allColors","filter","console","log","SOTBIT_BULTIBASKET_REMOVE_NOT_USE_BASKET","SOTBIT_BULTIBASKET_UPDATE_BASKET","removeAttribute","SOTBIT_BULTIBASKET_CREATE_NEW_BASKET","title","target","_context2","ID","_context3","recalculateBasket","_context4","alert","SOTBIT_BULTIBASKET_YOU_NEED_TO_CHOOSE_A_COLOR_FIRST","trim","SOTBIT_BULTIBASKET_YOU_NEED_TO_CHOOSE_A_NAME_FIRST","NAME","encodeURI","newBasketId","_this5","createNewBasketNotification","setCurrentBasketEvent","Action","additionalParams","_context5","showWait","ajax","runAction","data","requestData","JSON","stringify","viewParam","SHOW_SUMMARY","SHOW_IMAGE","SHOW_PRICE","addionalsParams","render","closeWait","basketItemId","_context6","status","classH","scrinHeight","documentElement","clientHeight","basketHeight","HIDE_ON_BASKET_PAGES","currentPage","PATH_TO_ORDER","ITEMS","item","_this6","photo","src","PICTURE","href","DETAIL_PAGE_URL","innerHTML","price","PRICE","priceCurency","CURRENCY","basePrice","BASE_PRICE","basePriceCurency","quantity","QUANTITY","measure","MEASURE_NAME","text","SOTBIT_BULTIBASKET_TOTAL_PRICE","finalPrice","FINAL_PRICE","currency","sendBasketItemRequest","BASKET_ID","childText","childTotalPrice","Number","TOTAL_PRICE","toFixed","childTotalCurrency","MAIN","SOTBIT_BULTIBASKET_MAIN_BASKET","SOTBIT_BULTIBASKET_OHER_BASKET","otherBasketDomElements","getBaksetList","_this7","getAdditonalBasketList","moveItemsToBusket","_this8","otherBasket","Boolean","_this9","dataset","stopPropagation","removeBasketEvent","showBasketToolTip","_this10","POSITION_VERTICAL","Math","round","offsetHeight","showClass","order","fromColor","textBefore","createNotificationText","SOTBIT_BULTIBASKET_ORDER_PROCESSED","createNotificationBasketColor","basketName","fromName","textAfter","SOTBIT_BULTIBASKET_BASKET_REMOVED","toColor","br","createElement","SOTBIT_BULTIBASKET_NEW_MAIN","toName","united","SOTBIT_BULTIBASKET_ITEMS_BASKTET_FROM","color1","basketName1","thi","SOTBIT_BULTIBASKET_ITEMS_BASKTET_TO","color2","basketName2","changeColor","_this11","SOTBIT_BULTIBASKET_BASKET_ADD","SOTBIT_BULTIBASKET_COLOR_CHANGE","moveProductToBasket","toBasketColor","isArray","productsName","SOTBIT_BULTIBASKET_ITEMS_NAMES","product","textBefore2","SOTBIT_BULTIBASKET_AND_OTHER","textBefore1","SOTBIT_BULTIBASKET_ITEMS_MOVE","toBasketName","renderNotification","setTimeout","_this12","_this13","offsetWidth","clearTimeout","eCurrentTarget","eClientX","clientX","eClientY","clientY","textContent","textMaxWith","getTextMaxWidth","condition","clientWidth","right","innerWidth","top","_this14","basketItems","PRODUCT_ID","_context7","moveBasketItems","newBasketColor","SOTBIT_BULTIBASKET_NEW_BASKET_CREATED","colorElement","space","spaceColor","getComputedStyle","backgroundColor","rectangle","styles","text1","textElement","namespace","Sotbit","class"],"sourceRoot":""}