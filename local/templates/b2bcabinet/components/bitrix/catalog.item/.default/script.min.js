function showModal(e){document.body.style.overflow="hidden";var t='<div class="wrap-popup-window"><div class="modal-popup-bg" onclick="closeModal();">&nbsp;</div><div class="popup-window"><div class="popup-close" onclick="closeModal();"></div><div class="popup-content">';t+=e,t+="</div>",$("body").append(t)}function closeModal(){document.body.style.overflow="auto",BX.onCustomEvent("OnBasketChange"),$(".wrap-popup-window").last().remove()}function quickView(e){let t="&preview=Y";!1!==window.location.href.indexOf("clear_cache=Y")&&(t+="&clear_cache=Y"),e+=t,$.ajax({url:e,type:"POST",data:{sessid:BX.bitrix_sessid()},beforeSend:function(){BX.showWait()},success:function(e){showModal(e)},complete:function(){BX.closeWait()}})}function itemsSort(){const e=Array.prototype.slice.call(document.querySelectorAll(".offer-properties-item-inner__item")),t=Array.prototype.slice.call(document.querySelectorAll('.offer-properties-item-btnBlock__btn[data-action="reset-sort"]'));e.forEach(function(e){e.addEventListener("click",function(){const e=getParent(this,"index_blank-table-tbody"),t=getParent(this,"offer-properties-item-inner");t.querySelector(".active")?t.classList.add("checked"):t.classList.remove("checked");const o=Array.prototype.slice.call(e.querySelectorAll(".offer-properties-item-inner.checked")).length,r=Array.prototype.slice.call(e.querySelectorAll(".offer-item")),n=r.map(function(e){return Array.prototype.slice.call(e.querySelectorAll("[data-propvalue]"))}).map(function(e){return e.map(function(e){return c({},e.dataset.propname,e.dataset.propvalue)})}),i=Array.prototype.slice.call(e.querySelectorAll(".offer-properties-item-inner")).map(function(e){return Array.prototype.slice.call(e.querySelectorAll(".active [data-value]"))}).map(function(e){return e.map(function(e){return c({},e.dataset.name,e.dataset.value)})});function c(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}n.forEach(function(e,t){let n=[];e.forEach(function(e){for(let o in e)i.forEach(function(r){r.forEach(function(r){e[o]===r[o]&&n.push(t)})})}),o===n.length?r[t].classList.remove("hide"):r[t].classList.add("hide")})})}),t.forEach(function(e){e.addEventListener("click",function(){const e=getParent(this,"index_blank-table-tbody"),t=Array.prototype.slice.call(e.querySelectorAll(".offer-properties-item-inner__item.active")),o=Array.prototype.slice.call(e.querySelectorAll(".offer-item")),r=Array.prototype.slice.call(e.querySelectorAll(".offer-properties-item-inner.checked"));o.forEach(function(e){e.classList.remove("hide")}),t.forEach(function(e){e.classList.remove("active")}),r.forEach(function(e){e.classList.remove("checked")})})})}function getParent(e,t){let o=e;for(;!o.classList.contains(t)&&o!==document.body;)o=o.parentElement;if(o!==document.body)return o}$(document).ready(function(){let e=document.querySelectorAll(".index_blank .index_blank-table .table .offer-footer"),t=document.querySelectorAll(".offer-show-more-content .offer-show-more-content__btn"),o=document.querySelectorAll(".offer-properties-item-inner"),r=[];for(let t=0;t<e.length;t++)e[t].addEventListener("click",function(){let e=getParent(this,"index_blank-table-tbody");this.classList.contains("active")?(this.classList.remove("active"),e.querySelector(".offer-properties-hidden")&&(e.querySelector(".offer-properties-hidden").style.display="none")):this.classList.add("active")});for(let e=0;e<t.length;e++)t[e].addEventListener("click",function(){let e=getParent(this,"index_blank-table-tbody");this.classList.toggle("opened");for(let t=0;t<e.children.length;t++)e.children[t].classList.contains("offer-properties-hidden")&&("none"===window.getComputedStyle(e.children[t]).getPropertyValue("display")?e.children[t].style.display="table-row":e.children[t].style.display="none")});for(let e=0;e<o.length;e++){r[e]=o[e].querySelectorAll(".offer-properties-item-inner__item");for(let t=0;t<r[e].length;t++)r[e][t].addEventListener("click",function(){this.classList.toggle("active")})}$(".hover").mouseleave(function(){$(this).removeClass("hover")}),itemsSort()}),$(document).ready(function(){var e=document.querySelectorAll(".bootstrap-touchspin-up"),t=document.querySelectorAll(".bootstrap-touchspin-down");const o=document.querySelector(".btn.add_to_cart");for(var r=0;r<e.length;r++)"ontouchstart"in window?(e[r].addEventListener("touchstart",function(){n(this)}),t[r].addEventListener("touchstart",function(){n(this)})):(e[r].addEventListener("click",function(){n(this)}),t[r].addEventListener("click",function(){n(this)}));function n(e){var t=$(e).offsetParent().find(".form-control.touchspin-empty");if(t.length>0){var r=$(t).data("id"),n=$(t).data("maxqnt"),i=$(t).val(),c=$(e).parentsUntil("tbody").filter("tr"),a=$(c).children("td.js-product-property"),l=$(c).children("td.js-price"),s={},d={};$.each(a,function(e,t){var o={};o.CODE=$(t).data("propcode"),o.VALUE=$(t).html(),o.NAME=$(t).data("propname"),s[e]=o}),$.each(l,function(e,t){var o={};""!==$(t).html()&&(o.VALUE=$(t).data("price_value"),o.NAME=$(t).data("price_name"),o.CODE=$(t).data("price_code"),o.CURRENCY=$(t).html().replace(/[\d\s]+/g,""),d[e]=o)}),$.ajax({type:"POST",url:site_path+"include/ajax/blank_ids.php",data:{id:r,qnt:i,props:s,prices:d,baseCurrency:baseCurrency,maxQnt:n},success:function(e){var t=JSON.parse(e);if(o.disabled=0===t.length,t){var r=0;t.TOTAL_COUNT&&(r=t.TOTAL_COUNT),$(".index_blank-add_cart-number").html(r);var n=0;t.TOTAL_PRICE&&(n=t.TOTAL_PRICE),$(".index_blank-add_cart-total").html(n)}}})}}var i=$(".form-control.touchspin-empty");$.each(i,function(e,t){t.addEventListener("input",function(){this.timer&&clearTimeout(this.timer),this.timer=setTimeout(n(this),700)})})});