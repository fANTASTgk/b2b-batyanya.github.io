function newInputInit(e){var t=e.nextElementSibling;t.innerHTML;e.addEventListener("change",(function(e){var n="";(n=this.files&&this.files.length>1?(this.getAttribute("data-multiple-caption")||"").replace("{count}",this.files.length):e.target.value.split("\\").pop())&&(t.innerHTML=n)}))}function AddFileInput(){let e=document.getElementById("files_counter").value,t=document.querySelector(".add_more_files"),n=t.querySelector(`.input-file[name=FILE_${e-1}]`);0!=n.value?document.getElementById("files_counter").value<5&&($(t).append('<div class="media-body" id="files_'+e+'"><div class="upload-file"><img id="files_preview_'+e+'"><input type="file" name="FILE_'+e+'" size="30" class="input-file" data-fouc onchange="showPreviewPicture('+e+')"><span class="filename">'+BX.message("FILE_NOT_SELECTED_TEXT")+'</span><span class="fileremove" onclick="RemoveFile(event)"><i class="ph-x ms-2 fs-sm"></i></span></div></div>'),n=document.querySelector(".input-file[name=FILE_"+e+"]"),n&&newInputInit(n),n.click(),document.getElementById("files_counter").value=++e):document.querySelector(`.input-file[name=FILE_${e-1}]`).click()}function RemoveFile(e){let t,n=document.getElementById("files_counter").value;(t=e.target.closest(".media-body"))&&(t.remove(),document.getElementById("files_counter").value=--n)}function showPreviewPicture(e){const t=event.target.files[0],n=new FileReader;/^image/.test(t.type)&&(n.onload=function(){document.getElementById("files_preview_"+e).src=n.result}),n.readAsDataURL(event.target.files[0])}