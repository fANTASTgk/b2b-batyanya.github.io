$(document).ready((function(){SweetAlert.initComponents();const e=document.querySelector("#modal_company_join"),t=document.querySelector(".company-join__select-block"),n=document.querySelector(".joinCompany__error-block");var o=document.querySelector('[name="company-join-send"]'),c=document.querySelector(".join__search-company"),a=document.querySelector('button[type="reset"]');if(o&&o.addEventListener("click",(function(){BX.showWait("modal_company_join-dialog");let e=[],t=document.querySelectorAll(".select__company-item.checked");for(let n=0;n<t.length;n++)e[n]=t[n].getAttribute("data-id"),delete companyJoin_companyList[e[n]];let n=document.querySelector(".joinCompany__error-block");BX.ajax.runComponentAction("sotbit:auth.company.join","joiningCompany",{mode:"class",data:{JOIN_COMPANY_ID:e}}).then((function(e){!1===e.data.error?(a.click(),SweetAlert.showSuccess(BX.message("SUCCESS_TITLE"),BX.message("SUCCESS_TEXT"))):e.data.errorMessage&&(n.innerHTML='<div class="bitrix-error"><label class="validation-invalid-label errortext">'+e.data.errorMessage+"</label></div>"),BX.closeWait()}))})),c&&c.addEventListener("input",(function(){if(t.innerHTML="",""===this.value)return;var e=this.value.replace('"',"").toLowerCase();const n=companyJoin_companyList;var o={};for(let t in n)n[t].SEARCH_NAME.toLowerCase().includes(e)&&(o[t]=n[t]);for(let e in o){var c=document.createElement("DIV");c.setAttribute("class","select__company-item"),c.setAttribute("data-id",e),c.innerHTML=n[e].PRINT_NAME+'<i class="select__company-icon ph-check"></i>',c.addEventListener("click",r),t.appendChild(c)}})),a&&a.addEventListener("click",(function(){t&&(t.innerHTML="");n&&(n.innerHTML="");c&&(c.value="")})),!e){const e=document.querySelector('[data-target="#modal_company_join"]');e&&e.addEventListener("click",(function(){SweetAlert.showInfo(BX.message("INFO_TITLE"))}))}function r(){this.classList.toggle("checked")}}));