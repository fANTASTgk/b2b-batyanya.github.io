function changePersonalBlock(e){let t=$(".js_person_type .js_checkbox_person_type").index(e);$(".js_person_type .js_person_type_block").hide(),$(".js_person_type .js_person_type_block").eq(t).show()}function sendForm(e){BX.showWait();const t=document.querySelector('.js_person_type_block[style=""] #company-register'),r=new FormData(t);if(!t.querySelector('input[name="'+companyRegisterAgreementInput+'"]').checked)return void BX.closeWait();const a=document.querySelector(".bitrix-error");let o=t.querySelector("#CONFIRM_JOIN");BX.ajax.runComponentAction("sotbit:auth.company.register","registerCompany",{signedParameters:window.arParams,mode:"class",data:r}).then((function(t){if(BX.closeWait(),t.data.errors){a.innerHTML=t.data.errors,document.querySelector(".content").scroll({top:0,left:0,behavior:"smooth"});const r=e.querySelector("#captcha_sid"),o=e.querySelector(".password_recovery-captcha_wrap img"),c=e.querySelector(".password_recovery-captcha_input input");o&&($.getJSON(siteDir+"include/ajax/reload_captcha.php",(function(e){o.setAttribute("src","/bitrix/tools/captcha.php?captcha_sid="+e),r.value=e})),c.value="")}if("COMPANY_ISSET"==t.data){0==confirm(confirmModerationMsg)?o.value="N":(o.value="Y",sendForm(e))}else if(t.data.message){document.querySelector(".auth-form").remove();const e=document.querySelector(".company-register__success-form");e.querySelector(".btn-primary").insertAdjacentHTML("beforebegin",t.data.message),e.style.display="flex"}}))}function hideBlock(e){BX.remove(e.closest(".form-control-multiple-wrap"))}function reloadCaptcha(e,t){const r=e.closest(".password_recovery-captcha_wrap");if(!r)return;const a=e.querySelector("i"),o=r.querySelector("img"),c=document.getElementById("captcha_sid");o.classList.add("disabled"),a.classList.add("spinner-grow"),$.getJSON(t+"include/ajax/reload_captcha.php",(e=>{o.setAttribute("src","/bitrix/tools/captcha.php?captcha_sid="+e),c.value=e,o.onload=function(){o.classList.remove("disabled"),a.classList.remove("spinner-grow")}}))}$(document).ready((function(){$(".js_person_type .js_checkbox_person_type").click((function(){changePersonalBlock(this)})),changePersonalBlock($(".js_person_type .js_checkbox_person_type:checked"))})),BX.ready((function(){var e=document.querySelectorAll(".multiple-props .btn");if(e)for(var t in e)BX.bind(e[t],"click",BX.delegate((function(e){if(BX.type.isDomNode(e.target)){var t=BX.create("input",{attrs:{className:"form-control",type:e.target.getAttribute("data-add-type"),name:e.target.getAttribute("data-add-name"),placeholder:e.target.getAttribute("data-add-placeholder"),minlength:e.target.getAttribute("data-add-minlength"),maxlength:e.target.getAttribute("data-add-maxlength")}}),r=BX.create("div",{attrs:{className:"form-control-multiple position-absolute end-0 top-50 translate-middle-y me-1",onclick:"hideBlock(this)"},children:[BX.create("button",{attrs:{className:"form-control-multiple-ic btn btn-sm btn-icon btn-link text-muted",type:"button"},children:[BX.create("i",{attrs:{className:"ph-x fs-base"}})]})]}),a=BX.create("div",{attrs:{className:"form-control-multiple-wrap"},children:[t,r]});e.target.parentNode.insertBefore(a,e.target)}})))}));