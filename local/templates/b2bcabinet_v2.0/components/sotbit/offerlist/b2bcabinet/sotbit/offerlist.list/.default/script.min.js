function SotbitOfferlist(t,e,o){this.offer=t,this.params=o,this.offerId=t.ID,this.cardNode=document.querySelector('[data-offerlist-id="'+this.offerId+'"]'),this.products=t.PRODUCTS,this.conditionText=t.DESCRIPTION,this.select=e,this.editorCardIinit={},this.cardNode&&(SweetAlert.initComponents(),BX.loadExt("sidepanel"),this.initEvents())}SotbitOfferlist.prototype.initEvents=function(){if(document.body.append(document.querySelector(this.select.conditionTextModal)),this.select.condition&&this.cardNode.querySelector(this.select.condition)?.addEventListener("click",this.showCondition.bind(this)),this.offer.ERRORS)return this.cardNode.querySelector(this.select.addBasket)?.addEventListener("click",this.showErrorNotavailable),void this.cardNode.querySelector(this.select.download)?.addEventListener("click",this.showErrorNotavailable);this.select.addBasket&&this.cardNode.querySelector(this.select.addBasket)?.addEventListener("click",this.addToBasketAction.bind(this)),this.select.download&&this.cardNode.querySelector(this.select.download)?.addEventListener("click",this.downloadAction.bind(this))},SotbitOfferlist.prototype.showCondition=function(){document.querySelector(this.select.conditionTextModal+" .modal-body").innerHTML=this.conditionText,document.querySelector('[data-bs-target="'+this.select.conditionTextModal+'"]').click()},SotbitOfferlist.prototype.showErrorNotavailable=function(){SweetAlert.showInfo(BX.message("SO_ACTION_NOTAVAILABLE_1"),BX.message("SO_ACTION_NOTAVAILABLE_2"))},SotbitOfferlist.prototype.addToBasketAction=function(){BX.showWait(),BX.ajax.runComponentAction("sotbit:offerlist.list","addToBasket",{mode:"class",data:{arProduct:this.products}}).then((t=>{if(BX.closeWait(),BX.onCustomEvent("OnBasketChange"),!0===t.data.isSuccess)SweetAlert.showSuccess(t.data.message);else{let e="";t.data.forEach((t=>e+=t+"\n")),SweetAlert.showError(e)}}),(t=>{BX.closeWait(),SweetAlert.showError(t)}))},SotbitOfferlist.prototype.downloadAction=function(){window.innerWidth<=576?(BX.showWait(),$.get(this.offer.DETAIL_PAGE_URL+"&IFRAME=Y&IFRAME_TYPE=SIDE_SLIDER").done((t=>{const e=new RegExp("\x3c!-- Offerlist document --\x3e(.*?)\x3c!-- /offerlist document --\x3e","s"),o=t.match(e)[1];o?BX.ajax.runComponentAction("sotbit:offerlist.editor","saveDocument",{mode:"class",data:{html:window.btoa(unescape(encodeURIComponent(o))),offerId:this.offerId}}).then((t=>{BX.closeWait(),1==t.data&&setTimeout((()=>{window.open(this.offer.DETAIL_PAGE_URL+"&OFFER_PRINT=Y&DOWNLOAD=Y")}),0)}),(t=>{BX.closeWait(),SweetAlert.showError(t)})):BX.closeWait()})).fail((t=>{BX.closeWait(),SweetAlert.showError(t)}))):BX.SidePanel.Instance.open(this.offer.DETAIL_PAGE_URL,{width:1344,label:{text:"",color:"#9E9E9E",bgColor:"transparent",opacity:80}})};